<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<title>LSD Model Writing</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
h1
	{mso-style-link:"Título 1 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
h2
	{mso-style-link:"Título 2 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h3
	{mso-style-link:"Título 3 Char";
	margin-top:36.0pt;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h4
	{mso-style-link:"Título 4 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Título Char";
	margin-right:0cm;
	margin-left:0cm;
	text-align:center;
	font-size:18.0pt;
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
tt
	{font-family:"Courier New";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Texto de balão Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
span.Ttulo1Char
	{mso-style-name:"Título 1 Char";
	mso-style-link:"Título 1";
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
span.Ttulo2Char
	{mso-style-name:"Título 2 Char";
	mso-style-link:"Título 2";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.Ttulo3Char
	{mso-style-name:"Título 3 Char";
	mso-style-link:"Título 3";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.Ttulo4Char
	{mso-style-name:"Título 4 Char";
	mso-style-link:"Título 4";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.TtuloChar
	{mso-style-name:"Título Char";
	mso-style-link:Título;
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
span.TextodebaloChar
	{mso-style-name:"Texto de balão Char";
	mso-style-link:"Texto de balão";
	font-family:"Tahoma","sans-serif";}
p.msolistparagraphcxspfirst, li.msolistparagraphcxspfirst, div.msolistparagraphcxspfirst
	{mso-style-name:msolistparagraphcxspfirst;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.msolistparagraphcxspmiddle, li.msolistparagraphcxspmiddle, div.msolistparagraphcxspmiddle
	{mso-style-name:msolistparagraphcxspmiddle;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.msolistparagraphcxsplast, li.msolistparagraphcxsplast, div.msolistparagraphcxsplast
	{mso-style-name:msolistparagraphcxsplast;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0cm;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";}
span.Cdigo
	{mso-style-name:Código;
	font-family:"Courier New";
	color:gray;}
.MsoChpDefault
	{font-size:10.0pt;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 -->
</style>

<link rel=icon href="image/lsd.png">
<meta name=Author content="LSD - Laboratory for Simulation Development">

<iframe name=navbar src=navbar.html scrolling=no style='position:fixed;
 border-bottom-style:none;border-left-style:none;border-right-style:none;
 border-top-style:none;height:55px;left:0in;overflow:hidden;right:0in;
 top:0in;width:100%'>
</iframe>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoTitle>&nbsp;</p>

<p class=MsoTitle>Writing a LSD Model</p>

<p class=MsoNormal>This is a step-by-step tutorial to create a simple LSD
simulation model. Modelers are invited to follow the <a href="LMM_primer.html">LMM
Primer</a>, for an introduction to LSD, and the <a href="model_using.html">user
tutorial</a>, on using existing LSD models, before trying this tutorial. </p>

<p class=MsoNormal>A LSD model is composed by: </p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>Equations for Variables:</b> chunks of basic programming code
for each Variable in the model, much like the definition of a difference
equation in terms of a mathematical expression.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>A model structure:</b> a hierarchical collection of
interconnected entities called Objects. Each Object may contain Variables,
Parameters or other descending (son) Objects.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b>A model configuration:</b> the initialization data required to
run the simulation, like the initial values for Parameters and Variables and
the number of Object instances at the beginning of the simulation run and much
more (e.g., number of time steps, data to save).</p>

<p class=MsoNormal>All the model elements are contained in two types of files:
the equation file (<span class=Cdigo>.cpp</span> extension), holding the
Equations code, and the configuration file(s) (<span class=Cdigo>.lsd </span>extension),
where the other elements are stored. There is typically one equation file and
one or more configuration files per LSD model. </p>

<p class=MsoNormal>Therefore, creating a LSD model means to write the code for
the Equations in the equation file (using LMM) and to generate the model
structure and configuration in a configuration file (using the LSD Browser).
The tutorial steps listed below are a guide to create these files and more. Try
following the list when creating your first model by clicking on the Operation
name for the detailed instructions at each step. </p>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=7 cellpadding=0 width="100%"
 style='width:100.0%'>
 <tr>
  <td style='background:#BFBFBF;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Operation</b></p>
  </td>
  <td style='background:#BFBFBF;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Window</b></p>
  </td>
  <td style='background:#BFBFBF;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal align=center style='text-align:center'><b>Objective</b></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l1></a><a href="#_Design_a_model">Design a model</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Paper and&nbsp; <br>
  pencil</p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Decide about the few difference equations for a prototype
  of the model and the entities to be represented. </p>
  <p class=MsoNormal>Sketch out the kind of results to investigate.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l2></a><a href="#_Create_a_new">Create a new model</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#lmm" target=newwindow>LMM</a> <br>
  or <br>
  <a href="LSD_windows.html#modelbrowser">LSD Model Browser</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Generate an “empty” model by selecting menu option <span
  class=Cdigo>File&gt;New Model</span> (<a href="LMM.html#new"
  target=newwindow>LMM manual on this</a>).</p>
  <p class=MsoNormal>Create the home directory and support files for the model
  and an equation file with no code.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l3></a><a href="#_Write_the_Equations">Write the
  Equations</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#lmm" target=newwindow>LMM</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Open the equation file using command <span class=Cdigo>Model&gt;Show
  Equations</span> (or click the C++ page icon) and add the Equations
  associated with the model’s Variables (<a href="LSD_macros.html">LSD Equation
  coding guide</a>).&nbsp; </p>
  <p class=MsoNormal>Each Equation is inserted independently, much like a set
  of difference equations. The programming knowledge required is usually
  limited to the logical/mathematical operations represented in the Equation.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l4></a><a href="#_Compile_the_LSD">Compile the LSD
  model program</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#lmm" target=newwindow>LMM</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Try to generate the LSD model program using menu option <span
  class=Cdigo>Model&gt;Compile and Run </span>(or click on the second yellow
  lightning icon, the one with the green arrow) and, if errors occur, check the
  list of coding errors (<a href="LMM.html#make" target=newwindow>LMM manual on
  this</a>). </p>
  <p class=MsoNormal>LMM attempts to create a model program by compiling the
  equation file. In case of syntactical errors in the Equations' code LMM
  provides their list and location in the equation file.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l5></a><a href="#_Fix_compilation_errors">Fix
  compilation errors</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#lmm" target=newwindow>LMM</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Change the Equations’ code to prevent the errors (<a
  href="LSD_quickhelp.html#problem">suggestions for fixing common errors</a>)
  using the <span class=Cdigo>Go to Error</span> button in the Compilation
  Errors window. </p>
  <p class=MsoNormal>Using the list of errors provided after a failed
  compilation it is recommended to fix one error at a time, staring from the
  first one. Frequently a single coding mistake produces more than one error so
  recompiling after each fix is usually the best approach. Note that errors are
  listed along line and column numbers referring to the file and location where
  they occurred. LMM offers the option to directly jump to each error location.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l6></a><a href="#_Open_the_LSD">Open the LSD
  Browser</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#lmm" target=newwindow>LMM</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Run the fixed LSD model program to open the main LSD
  Browser interface using again the command <span class=Cdigo>Model&gt;Compile
  and Run </span>(or click on the second yellow lightning icon, the one with
  the green arrow) (<a href="LMM.html#make" target=newwindow>LMM manual on this</a>).</p>
  <p class=MsoNormal>LMM launches the LSD model program and opens the LSD
  Browser window. This is the main interface to create the model configuration
  and to execute the simulation runs.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l7></a><a href="#_Create_the_model">Create the
  model structure</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Generate the model configuration using the LSD Browser <span
  class=Cdigo>Model</span> menu options (<a href="menumodel.html"
  target=newwindow>LSD manual on this</a>). </p>
  <p class=MsoNormal>To define a model structure the modeler needs only to
  define its relative position in the inverted tree hierarchy and type in the
  names and lags (if any) of the model elements (Objects, Variables,
  Parameters). For a discussion on how to design the model structure, <a
  href="menumodel.html#hint">see here</a>.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l8></a><a href="#_Define_the_number">Define the
  number of Object instances and initial values</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a> <br>
  and/or<br>
  <a href="LSD_windows.html#modelstructure">LSD Model Structure</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Edit the model configuration using the LSD Browser <span
  class=Cdigo>Data</span> menu options <span class=Cdigo>Number of Objects</span>
  (or click the white on green plus icon) and <span class=Cdigo>Initial Data</span>
  (or click the spreadsheet with a pencil icon) (<a href="menudata.html"
  target=newwindow>LSD manual on this</a>).</p>
  <p class=MsoNormal>First, adjust the desired number of instances for each
  Object type requiring more than one instance (the default). Next, fill in the
  required numerical values to the initialization of Parameters and lagged
  Variables.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="#_Choose_which_data">Choose which data series to
  save and to plot at run-time</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a>&nbsp;</p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Edit the respective elements configuration using the LSD
  Browser <span class=Cdigo>Model&gt;Change Element</span> menu (or use the
  context menu by right clicking on its name on the <a
  href="LSD_faqs.html#variable">Variables</a> and <a
  href="LSD_faqs.html#parameter">Parameters</a> list box) (<a
  href="browser.html#variables" target=newwindow>LSD manual on this</a>).</p>
  <p class=MsoNormal>For the chosen element it is possible to decide whether it
  shall be included in the data saved for analysis or to appear in the run-time
  plot.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l9></a><a href="#_Edit_simulation_settings">Edit
  the simulation settings</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Change the default simulation settings using the menu
  option <span class=Cdigo>Run&gt;Simulation Settings</span> (or click the
  wrench icon) (<a href="menurun.html#simsetting">LSD manual on this</a>).</p>
  <p class=MsoNormal>Although provided by default, the modeler may want to
  determine the number of time steps per simulation run, the values to be
  saved, the series to be shown during the run, and other technical settings.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l10></a><a href="#_Run_the_simulation">Run the
  simulation</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a> <br>
  and<br>
  <a href="LSD_windows.html#log">LSD Log</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Use the command <span class=Cdigo>Run&gt;Run</span> (or
  click on the blue triangle/play icon) to <a href="LSD_faqs.html#simulationrun">run
  the simulation</a> (<a href="menurun.html" target=newwindow>LSD manual on
  this</a>). </p>
  <p class=MsoNormal>Check first if there are logical errors in the model, that
  is, code that cannot be executed given the state of the model in any given
  time step. Errors are presented in dialog boxes and detailed in the <a
  href="LSD_windows.html#log">LSD Log</a> window. Examples of logical errors
  are deadlocks (two Equations requesting reciprocally to be computed one
  before the other), or missing elements of the model (usually due to
  differences in spelling between the Equation code and structure labels). See
  common errors and fixes <a href="LSD_quickhelp.html#problem">here</a>. </p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l11></a><a href="#_Fix_logical_errors">Fix logical
  errors</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#lmm" target=newwindow>LMM</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Correct the offending code in the respective Equations
  until the model can be compiled and the simulation run, completed.</p>
  <p class=MsoNormal>In most cases the error messages issued by LSD allow to
  quickly find the Equation's code causing. See common errors and fixes <a
  href="LSD_quickhelp.html#problem">here</a>.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l12></a><a href="#_Analyze_the_simulation">Analyze
  the simulation run results</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a><br>
  and<br>
  <a href="LSD_windows.html#analysisofresults">LSD Analysis of Results</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>When the simulation run successfully finishes, open the LSD
  Analysis of Results window to check the results using the menu <span
  class=Cdigo>Data&gt;Analysis of Results</span> (or click in the plot icon) (<a
  href="menudata_res.html">LSD manual on this</a>).</p>
  <p class=MsoNormal>The list of time series saved during the simulation are
  loaded in the LSD Analysis of Result window to produce plots, gather
  statistics, export data, etc. Check if the obtained results are in line with
  the expected ones and, if not, use the available data to understand any
  discrepancy. If a problem is detected, maybe a revision of the Equations, the
  model structure or the initialization data is required.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l13></a><a href="#_Test_different_configurations">Test
  different configurations</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Produce different model configuration files by saving them
  under different meaningful names using the <span class=Cdigo>File&gt;Save As</span>
  command (<a href="menufile.html">LSD manual on this</a>).</p>
  <p class=MsoNormal>Starting from a fresh existing model configuration, change
  the initial values of the relevant elements or the simulation settings to
  test the model behavior under different conditions (see <a
  href="menudata.html">how to change initial values</a> and <a
  href="menurun.html#simsetting">how to modify simulation settings</a>).</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l14></a><a href="#_Generate_the_Model">Generate
  the model report</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#browser">LSD Browser</a></p>
  </td>
  <td valign=top style='padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Create a HTML file reporting the model structure and the
  interdependencies between model elements using the menu <span class=Cdigo>Model&gt;Create
  Model Report </span>(<a href="LSD_faqs.html#modelreport">information on this</a>).
  </p>
  <p class=MsoNormal>The report is extremely useful to understand the actual
  computations of a model and the inter-relations among its elements.</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a name=l15></a><a href="#_Extend_the_model">Extend the
  model</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal><a href="LSD_windows.html#lmm" target=newwindow>LMM</a><br>
  and<br>
  <a href="LSD_windows.html#browser">LSD Browser</a></p>
  </td>
  <td valign=top style='background:#F2F2F2;padding:5.65pt 5.65pt 5.65pt 5.65pt'>
  <p class=MsoNormal>Add new elements to the model, inserting also the
  Equations for the new Variables (<a href="LSD_macros.html">LSD Equation
  coding guide</a>). </p>
  <p class=MsoNormal>Every time a new Equation is added to the model, the LSD
  model program needs to be recompiled in LMM.</p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal>The LSD models you create may be distributed to any LSD user
by just sending the <a href="LSD_faqs.html#modelhome">model home directory</a>
(where the model’s files are contained). The user will have all the required
files to repeat your simulation, understand it and, possibly, extend the model.
&nbsp; </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t1></a><a name="_Design_a_model"></a>Design a model</h1>

<p class=MsoNormal>The design of a model must start with the simplest
structure, to be gradually expanded, exploring the possibility of LSD to
indifferently use Parameters or Variables in the code of Equations. This way,
the modeler can start the model with few Variables and several Parameters and
gradually transform (“endogeneize”) Parameters into Variables. Such
transformation can be done by simply adding an Equation (and controlling for
any error) to the new Variables, without affecting existing parts of the model
even when these are connected to the new code. </p>

<p class=MsoNormal>Let's consider a model where a group of firms compete on a
market on the basis of the quality of their product. The driving equation is,
for each firm: </p>

<p class=MsoNormal><i>Sales<sub>t</sub></i> = <i>Sales<sub>t </sub></i><sub>-1 </sub> [
1 + <i>a</i> ( <i>Quality</i> / <i>AverageQuality<sub>t</sub></i><sub> -1</sub>
– 1) ]</p>

<p class=MsoNormal>That is, the sales of each firm remain constant if the
quality of its product is identical to the average, or changes of <i>a</i>
percentage points in respect to the ratio of its quality over the average
quality. </p>

<p class=MsoNormal>The equation for the average quality must obviously be: </p>

<p class=MsoNormal><i><span lang=FR>AverageQuality<sub>t</sub></span></i><span
lang=FR> = &#8721;<i><sub>i</sub></i> ( <i>Quality<sub>i</sub></i><sub>,<i>t</i></sub>
* <i>Sales<sub>i</sub></i><sub>,<i>t</i> </sub>/ <i>TotalSales<sub>t</sub></i> )</span></p>

<p class=MsoNormal>With:</p>

<p class=MsoNormal><i>TotalSales<sub>t</sub></i>&nbsp; = &#8721;<i><sub>i</sub></i>
( <i>Sales<sub>i,t</sub></i><sub> </sub>)</p>

<p class=MsoNormal>Note that in the first equation for <i>Sales</i> we use <i>AverageQuality</i>
at time <i>t </i>– 1. This is to avoid a deadlock. This would happen if the
equation for <i>Sales</i> required the most recent value of <i>AverageQuality</i>,
which in turn requires <i>Sales</i> which cannot be computed. </p>

<p class=MsoNormal>Concerning the structure of the model, we decide to use
several firm Objects, calling them <span class=Cdigo>Firm</span>, containing
the values for <i>Sales</i> and <i>Quality</i>. The data common to every firm (<i>a</i>,
<i>TotalSales</i> and <i>AverageQuality</i>) will, instead, be placed in a
single Object (say <span class=Cdigo>Market</span>) containing the <span
class=Cdigo>Firm</span> Objects.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t2></a><a name="_Create_a_new"></a>Create a new model</h1>

<p class=MsoNormal>To open <a href="LSD_windows.html#lmm" target=newwindow>LMM</a>,
double-click LSD (LMM) icon in the desktop. The LSD (LMM) icons should have
been created during the LSD <a href="LMM.html#install" target=newindow>installation</a>.
If the icon was deleted (or otherwise is not available), you may (re)create it
following the instructions contained in Readme.txt for your operating system
(Windows, Linux or macOS). Alternatively, you may also invoke <a
href="LSD_windows.html#lmm" target=newwindow>LMM</a> from the file explorer
program by double-clicking the appropriate file in the LSD installation
directory (Windows: <span class=Cdigo>run.bat</span> or <span class=Cdigo>run64.bat</span>,
Linux: <span class=Cdigo>lmm</span> or <span class=Cdigo>lmm32</span>, macOS: <span
class=Cdigo>lmm[.app] </span>or <span class=Cdigo>lmmOSX</span>) or running it
from a command prompt or terminal window.</p>

<p class=MsoNormal>In&nbsp;<a href="LSD_windows.html#lmm" target=newwindow>LMM</a>
choose menu option <span class=Cdigo>File&gt;New Model</span>. Type a name
(e.g., “My model”), a version number and the (non-existing) <a
href="LSD_faqs.html#modelhome">home directory name</a> (no spaces allowed)
where to store the model files. The obvious requirement is that there is no
other model home directory with the same name. The models base directory, where
model home directories are created, is by default named “Work” and it is
located inside the LSD installation directory. </p>

<p class=MsoNormal>You are now asked if you want to create a text description
for your model (you can also create it later). For now just press <span
class=Cdigo>No</span>. You should be presented to the <a
href="LSD_faqs.html#equationfile">equation file</a> for a new model called “My
model”. The equation file is endowed with all the technical requirements for
the equation file in the <a href="LSD_faqs.html#modelprogram">LSD model program</a>.
You need to fill in the <a href="LSD_faqs.html#equation">Equations</a> for your
model (exclusively in between the two lines <span class=Cdigo>MODELBEGIN</span>
and <span class=Cdigo>MODELEND</span>). From now on, all the operations in LMM
menu <span class=Cdigo>Model</span> (e.g. run, debug, show equation file etc.)
will be referred to this model. </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t3></a><a name="_Write_the_Equations"></a>Write the Equations</h1>

<p class=MsoNormal>This operation is at the core of the model creation, since
it tells the simulation program how each <a href="LSD_faqs.html#variable">Variable</a>
should produce a new numerical value at each time step. You can copy the code
for the <a href="LSD_faqs.html#equation">Equations</a> presented here (<span
class=Cdigo>the line formatted like this</span><tt><span style='font-size:10.0pt'>)</span></tt>
or type it manually. Ignore the text coloring, which do not have any influence
on the actual working of the code. Yet, consider that <a
href="LSD_windows.html#lmm" target=newwindow>LMM</a> offers guided shortcuts to
insert the most frequently used LSD commands (right click to open the context
menu and choose <span class=Cdigo>LSD Macro</span>). See the <a
href="LMM.html#LsdScript">LMM manual</a> for details. </p>

<p class=MsoNormal>Let's use this structure to write the type in the equation
the code for the Variable <span class=Cdigo>Sales</span> (you can select the
following text for the equations, copy it with the menu <span class=Cdigo>Edit&gt;Copy</span>
(or <span class=Cdigo>Ctrl+c</span>) in the browser and then paste it in LMM
using <span class=Cdigo>Edit&gt;Paste</span> (or <span class=Cdigo>Ctrl+v</span>).
The equation code for <span class=Cdigo>Sales</span> is: </p>

<p class=MsoNormal><span class=Cdigo>EQUATION(&quot;Sales&quot;) <br>
</span><span class=Cdigo><span style='color:#00B050'>/* <br>
Level of sales: <br>
Sales[t]=Sales[t-1]*{1+a*(Quality/AverageQuality-1)} </span></span></p>

<p class=MsoNormal><span class=Cdigo><span style='color:#00B050'>The sales of a
firm are adjusted in respect of the ratio between firm's own Quality and the <br>
average quality. <br>
*/ </span></span></p>

<p class=MsoNormal><span class=Cdigo>v[0]=V(&quot;a&quot;); <br>
v[1]=VL(&quot;Sales&quot;,1); <br>
v[2]=V(&quot;Quality&quot;); <br>
v[3]=VL(&quot;AverageQuality&quot;,1); </span></p>

<p class=MsoNormal><span class=Cdigo>RESULT( v[1]*(1+v[0]*(v[2]/v[3]-1)) ) </span></p>

<p class=MsoNormal>Let's see what the Equation does. The first line indicates
that this code is the Equation for the Variable <span class=Cdigo>Sales</span>.
Then we have a comment (between the ‘<span class=Cdigo>/*</span>’ and ‘<span
class=Cdigo>*/</span>’ marks), without any relevance for the working of the
Equation, but helpful for documentation (this comment can be automatically
searched by the system and used in the model documentation). </p>

<p class=MsoNormal>The next 4 lines in the Equation collect the data necessary
to compute the value of <span class=Cdigo>Sales</span>. The <span class=Cdigo>v[0]</span>,
<span class=Cdigo>v[1]</span>, etc. are temporary <a href="LSD_faqs.html#c">C++</a>
variables used to store non-persistent intermediate results during computation.
The <a href="LSD_faqs.html#macro">LSD macro</a> <span class=Cdigo>V(&quot;label&quot;)</span>
simply returns the value of the model element named <span class=Cdigo>label</span>.
The <span class=Cdigo>VL(&quot;label&quot;, lag )</span> macro is similar to <span
class=Cdigo>V(&quot;label&quot;)</span>, but request the past value of the <a
href="LSD_faqs.html#variable">lagged Variable</a> named <span class=Cdigo>label</span>,
with <span class=Cdigo>lag</span> (a positive integer) lags. </p>

<p class=MsoNormal>In our example, in <span class=Cdigo>v[1]</span> it is
stored the value of the previous <a href="LSD_faqs.html#simulationrun">time
step</a> value of <span class=Cdigo>Sales</span>. The last line contains the
result for the Equation, that is, the numerical value that <span class=Cdigo>Sales</span>
will take after its Equation has been computed. </p>

<p class=MsoNormal>Note that <span class=Cdigo>V(&quot;label&quot;)</span>works
identically whether the value searched is a <a href="LSD_faqs.html#parameter">Parameter</a>
(like <span class=Cdigo>a</span>) or a <a href="LSD_faqs.html#variable">Variable</a>.
Moreover, the Equation’s computation is identical for Variable <span
class=Cdigo>Sales</span> stored in different Object instances. In fact, <span
class=Cdigo>Sales</span> is a Variable contained in an Object referring to
firms, while Variable <span class=Cdigo>AverageQuality</span> is located in
another Object, <span class=Cdigo>Market</span>. </p>

<p class=MsoNormal>Now we move to the other Equations. Place the cursor after
the last line or before the first line of the Equation for <span class=Cdigo>Sales</span>
(the order of Equations in the equation file is irrelevant). The proposed
Equation for <span class=Cdigo>TotalSales</span> is: </p>

<p class=MsoNormal><span class=Cdigo>EQUATION(&quot;TotalSales&quot;) <br>
</span><span class=Cdigo><span style='color:#00B050'>/* <br>
Sum of the Sales from each Firm <br>
*/ </span></span></p>

<p class=MsoNormal><span class=Cdigo>RESULT( SUM(&quot;Sales&quot;) ) </span></p>

<p class=MsoNormal>The last Equation, for <span class=Cdigo>AverageQuality</span>,
is similar to the previous one: </p>

<p class=MsoNormal><span class=Cdigo>EQUATION(&quot;AverageQuality&quot;) <br>
</span><span class=Cdigo><span style='color:#00B050'>/* <br>
Average quality of products, weighted with the sales. <br>
The equation scans all the Object Firm summing up the product Sales x Quality
and dividing for <br>
the total sales. <br>
*/ </span></span></p>

<p class=MsoNormal><span class=Cdigo>v[0]=V(&quot;TotalSales&quot;); <br>
v[1]=0; <br>
CYCLE(cur, &quot;Firm&quot;) <br>
{<br>
  //assign to pointer 'cur' all the Firm <br>
  v[2]=VS(cur,&quot;Sales&quot;); </span><span class=Cdigo><span
style='color:#00B050'>//compute Sales for the current Firm</span> <br>
&nbsp; v[3]=VS(cur,&quot;Quality&quot;); </span><span class=Cdigo><span
style='color:#00B050'>//compute Quality for the current Firm </span><br>
&nbsp; v[1]=v[1]+v[2]*v[3]; </span><span class=Cdigo><span style='color:#00B050'>//cumulate
the product Sales times Quality </span><br>
} </span></p>

<p class=MsoNormal><span class=Cdigo>RESULT( v[1]/v[0] ) </span></p>

<p class=MsoNormal>This Equation deserves some attention. Firstly, we store in <span
class=Cdigo>v[0]</span> the value of total sales. Then, we initialize <span
class=Cdigo>v[1]</span> to 0. The next lines contain a <span class=Cdigo>CYCLE</span>
command so that the temporary pointer named <span class=Cdigo>cur</span> (that
is, a temporary variable containing Objects instead of numerical values)
cyclically scans all the instances of the Object named <span class=Cdigo>Firm</span>.
The <span class=Cdigo>CYCLE</span> repeats the commands between the “<span
class=Cdigo>{</span>“ and “<span class=Cdigo>}</span>” marks, passing by all
the <span class=Cdigo>Firm</span> Object instances in the model. In each <span
class=Cdigo>CYCLE</span> three operations are performed: collect the value of <span
class=Cdigo>Sales</span> and <span class=Cdigo>Quality</span> for the firm
indicated by the pointer and add their product to <span class=Cdigo>v[1]</span>.
</p>

<p class=MsoNormal>Note that we use the LSD macro <span class=Cdigo>VS(pointer,
&quot;label&quot;)</span>. This function retrieves the value of a specific
instance (copy) of the Object named <span class=Cdigo>label</span> pointed by <span
class=Cdigo>pointer</span>, instead of generically search for any one instance
of this Object in the model. </p>

<p class=MsoNormal>Now you have entered all the required Equations for your
model. For more information, please refer to the <a href="LSD_functions.html"
target=newwindow>LSD macro language reference</a>. </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t4></a><a name="_Compile_the_LSD"></a>Compile the LSD model program</h1>

<p class=MsoNormal>First, save the <a href="LSD_faqs.html#equationfile">equation
file</a> in <a href="LSD_windows.html#lmm" target=newwindow>LMM</a> (menu <span
class=Cdigo>File&gt;Save</span> or click the floppy disk icon). </p>

<p class=MsoNormal>Now you need to create the <a
href="LSD_faqs.html#modelprogram">LSD model program</a>. Select the menu item <span
class=Cdigo>Model&gt;Compile and Run </span>(or click on the second yellow
lightning icon, the one with the green arrow).  <a href="LSD_windows.html#lmm"
target=newwindow>LMM</a> automatically <a href="LSD_faqs.html#compiler">(re)
compiles</a> all the required LSD modules including the equation file. If no
errors are found, the <a href="LSD_windows.html#browser">LSD Browser</a> for
the model is launched. Failure to compile is more frequently associated with
errors in the model’s code but sometimes is due to a wrong LSD configuration
(to be sure, reset your system configurations using the command <span
class=Cdigo>Model&gt;System Options</span>, and clicking on the button <span
class=Cdigo>Default XXX</span> appropriate to your computer type).</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t5></a><a name="_Fix_compilation_errors"></a>Fix compilation errors</h1>

<p class=MsoNormal>When <a href="LSD_faqs.html#compiler">compiling</a> the <a
href="LSD_faqs.html#modelprogram">LSD model program</a>, the system controls
that the commands written in the <a href="LSD_faqs.html#equationfile">equation
file</a> are legal C++ code using valid <a href="LSD_faqs.html#macro">LSD macro</a>
or <a href="LSD_faqs.html#macro">functions</a>. If the compilation fails, <a
href="LSD_windows.html#lmm" target=newwindow>LMM</a> opens a new window
containing the list of errors. Errors are presented when the <a
href="LSD_faqs.html#compiler">compiler</a> cannot interpret or disambiguate a
command in the <a href="LSD_faqs.html#equationfile">equation file</a>. It may
be caused by several situations, like invalid syntax, typos, undeclared
variables, etc. Check here the most <a href="LSD_quickhelp.html#errors">common
errors and possible fixes</a>. </p>

<p class=MsoNormal>When LMM presents a compiler error it also offers the
possibility to directly jump to the file and position where the compiler found
the error (use the <span class=Cdigo>Go to Error</span> button). Note that this
error may have occurred before this point (usually not by much) but never after
it. Please try to read the message(s) presented in the errors window in the
order they are shown to facilitate understanding the origin of the problem (it
is common that a single error originates more than one message). Note that you
can always reopen the last errors list choosing the menu item <span
class=Cdigo>Model&gt;Show Compilation Results</span> in LMM.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t6></a><a name="_Open_the_LSD"></a>Open the LSD Browser</h1>

<p class=MsoNormal>If the compilation succeeds, LSD automatically opens the <a
href="LSD_windows.html#browser">LSD Browser</a> window.</p>

<p class=MsoNormal>When the LSD Browser starts it is “empty”. That is, there is
no <a href="LSD_faqs.html#modelsetting">model configuration</a> (although the
program contains the <a href="LSD_faqs.html#equation">Equations</a>' code
already embedded). The basic LSD interface is composed by two windows, the LSD
Browser and the <a href="LSD_windows.html#log">LSD Log</a>. </p>

<p class=MsoNormal>The LSD Browser shows an <a href="LSD_faqs.html#object">Object</a>
named <span class=Cdigo>Root</span> as containing no elements. The <a
href="LSD_windows.html#browser">LSD Browser</a> is thought as a control center
to issue commands to LSD and to inspect the model configuration details, like
an <a href="LSD_faqs.html#object">Object</a> properties. The LSD Browser is
always pointed to an (current) Object, as indicated in the information bar, and
lists its contained <a href="LSD_faqs.html#variable">Variables</a>, <a
href="LSD_faqs.html#parameter">Parameters</a> and descending (son) Objects. It
is possible to explore the model with the LSD Browser, which shows one single <a
href="LSD_faqs.html#object">Object's</a> content at a time. The information bar
presents the current Object and its parent and two list boxes: the <a
href="LSD_faqs.html#modelstructure">descending (son) Objects</a>, at the left,
and the Variables and Parameters, at the right. Variables (<span class=Cdigo>var.</span>)
are indicated with a number (<span class=Cdigo>lag=x</span>) of lagged values
(used in the model for computations involving this Variable) and Parameters (<span
class=Cdigo>par.</span>). Any element in the Browser can be double clicked to
set their options and see their documentation (see below). The context menu
(right click) for each element is also available for quick changing most
settings. The current Object in the Browser can be changed to another one by
double-clicking the desired (son) descendant (to go down in the <a
href="LSD_faqs.html#modelstructure">hierarchy tree</a>) or on the name of its
parent (to go up). You can also use the arrow keys, <span class=Cdigo>Enter</span>
and <span class=Cdigo>Backspace</span> (as in a file browser) to move along
Objects, Variables and Parameters.&nbsp;</p>

<p class=MsoNormal>The Log window shows messages from LSD when necessary. For
the moment you can ignore it. </p>

<p class=MsoNormal>The Browser contains several menus. Modelers are interested
mainly in menu <span class=Cdigo>Model</span>, used to determine the <a
href="LSD_faqs.html#modelstruture">model structure</a>, while the other menus
are used to manage different aspects of the simulation that also users may be
interested in changing (like initial values, number of time steps, etc.). The
structure of the model and the remaining settings are saved in <a
href="LSD_faqs.html#modelsetting">configurations files</a> (extension <span
class=Cdigo>.lsd</span>) which can be loaded to directly execute a <a
href="LSD_faqs.html#simulatonrun">simulation run</a>. </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t7></a><a name="_Create_the_model"></a>Create the model structure</h1>

<p class=MsoNormal>To proceed with our example, the <a
href="LSD_faqs.html#modelstruture">model structure</a> we want to create is a <span
class=Cdigo>Market</span><b> </b><a href="LSD_faqs.html#object">Object</a> containing
several instances of Object <span class=Cdigo>Firm</span>. In particular, we
want the (fixed) Object <span class=Cdigo>Root</span><b> </b>to contain an
Object <span class=Cdigo>Market</span>, which in turns contain an Object <span
class=Cdigo>Firm</span><b> </b>(for the moment we ignore the quantitative
aspects of the model, like how many firms). In <span class=Cdigo>Market</span><b>
</b>and <span class=Cdigo>Firm</span><b> </b>we need yet to define the required
<a href="LSD_faqs.html#variable">Variables</a> and <a
href="LSD_faqs.html#parameter">Parameters</a>. </p>

<p class=MsoNormal>The model structure is always presented in LSD with respect
to the current Object shown in the <a href="LSD_windows.html#browser">LSD
Browser</a>. Considering this, follow the steps below to build the desired
model structure: </p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Choose the menu item <span class=Cdigo>Model&gt;Add Descending Object</span>
(or press <span class=Cdigo>Ctrl+D</span>) to add an son Object to <span
class=Cdigo>Root</span>. Type the name <span class=Cdigo>Market</span><b> </b>and
press <span class=Cdigo>OK</span> (you may also add a description, but for the
moment just leave the text box empty). Now the Browser shows <span class=Cdigo>Market</span><b>
</b>in the list of descendants. Notice that a new window has appeared, named <a
href="LSD_windows.html#modelstructure">LSD Model Structure</a>. This is a
graphical representation of the model (ignoring <span class=Cdigo>Root</span>).</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Double click on <span class=Cdigo>Market</span><b> </b>to move the
Browser to show Object <span class=Cdigo>Market</span>. If you typed the wrong
label instead of <span class=Cdigo>Market</span><b> </b>you can right-click on
its name and choose <span class=Cdigo>Rename</span> in the context menu.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><span class=Cdigo>Market</span><b> </b>is created with no contained
Variable or Parameter. We need <span class=Cdigo>Market</span><b> </b>to
contain one Parameter, <span class=Cdigo>a</span>, and two Variables, <span
class=Cdigo>TotalSales</span><b> </b>and <span class=Cdigo>AverageQuality</span>.
Make sure Market is still the current Object, choose the command <span
class=Cdigo>Menu&gt;Add Parameter</span><b> </b>and type the name <span
class=Cdigo>a</span>. Next, insert the Variable <span class=Cdigo>TotalSales</span>
by using menu item <span class=Cdigo>Model&gt;Add Variable</span> and writing
the name. Finally, when adding the Variable <span class=Cdigo>AverageQuality</span>,
remember to set to 1 the maximum lags. This is because we use <span
class=Cdigo>AverageQuality</span><b> </b>with lag 1 (<i>t</i> – 1) in the
Equation for <span class=Cdigo>Sales</span>. Notice that the Browser window
will list in the Variables list box the elements added.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Create now the Object <span class=Cdigo>Firm</span>, as descending from
(son of) <span class=Cdigo>Market</span><b> </b>by choosing <span class=Cdigo>Menu&gt;Add
Descending Object</span><b> </b>and set <span class=Cdigo>Firm</span> as the
name. The Browser will now list <b>Firm </b>as descending from <span
class=Cdigo>Market</span>. Double-click on <span class=Cdigo>Firm</span><b> </b>to
move the Browser to it. Notice that the LSD Model Structure window has been
updated to show <span class=Cdigo>Market</span><b> </b>as containing <span
class=Cdigo>Firm</span>.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>In <span class=Cdigo>Firm</span><b> </b>(the current Object in the LSD
Browser), use the same process (<span class=Cdigo>Model&gt;Add Variable</span>
or <span class=Cdigo>Model&gt;Add Parameter</span>) to create the Variable <span
class=Cdigo>Sales</span><b> </b>(it needs one lag) and the Parameter <span
class=Cdigo>Quality</span>.</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Check that the LSD windows look like these (the order of Variables and
Parameters does not matter):</p>

<p class=MsoNormal align=center style='margin:0cm;margin-bottom:.0001pt;
text-align:center'><img border=0 width=825 height=353
src="image/market_defined.png"></p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>The list box shows the names of Parameters followed by <span
class=Cdigo>(par.)</span>, and of Variables by <span class=Cdigo>(var. lag=X)</span>,
being the integer <span class=Cdigo>X</span> the maximum number of lagged
values used during Equations computation.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>8.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>If you made a mistake inserting an element, double-click on the wrong
element (or right click it for the context menu quick actions). You are shown
the list of options for the element, including renaming or changing the number
of lags (<span class=Cdigo>Properties</span>) and removing it (<span
class=Cdigo>Delete</span>).</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>9.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>The order in which the items appear in the Variables' list of an Object
is usually not relevant (it follows the order of insertion, by default) and can
be changed using <span class=Cdigo>Ctrl</span> plus the up and down arrow keys
on the element to move.</p>

<p class=MsoNormal>Now the model structure is complete. It may still contain
few mistakes: these can be corrected later, if the simulation manager issue
errors. Save the configuration using menu <span class=Cdigo>File&gt;Save</span>.
</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t8></a><a name="_Define_the_number"></a>Define the number of Object
instances and initial values</h1>

<p class=MsoNormal>The <a href="LSD_faqs.html#modelstruture">model structure</a>
is still not sufficient to run a simulation: we created so far only the general
structure, but the model needs to also specify the initial values to be used
for the <a href="LSD_faqs.html#parameter">Parameters</a> and for the <a
href="LSD_faqs.html#variable">lagged Variables</a> during the initial time
steps of the <a href="LSD_faqs.html#simulationrun">simulation run</a>.
Additionally, the initial values required depend also on the number of <a
href="LSD_faqs.html#object">Object instances</a> in the model. After Objects are
created, by default there is only one instance of each. </p>

<p class=MsoNormal>In our example, set the current Object to <span class=Cdigo>Firm</span>
and select <span class=Cdigo>Data&gt;Number of Objects</span> (or click the
white on green plus icon or simply press <span class=Cdigo>Ctrl+O</span>). Alternatively,
in the <a href="LSD_windows.html#modelstructure">LSD Model Structure</a>, right
click directly on the target Object and select <span class=Cdigo>Number of
Objects</span> in the context menu. After selection this command, a new window
opens, prompting you about the details on the desired change. Update the <span
class=Cdigo>Number of instances</span> field to 10. Now, move the <a
href="LSD_windows.html#browser">LSD Browser</a> to the Object <span
class=Cdigo>Market</span> and try to increase its number of instances to 3. In
the <a href="LSD_windows.html#modelstructure">LSD Model Structure</a> window
you should see three groups of the Object <span class=Cdigo>Firm</span>
instances, represented only by three numerals “10”, one for each market.
Lastly, restore to one the number of instances of <span class=Cdigo>Market</span>.&nbsp;Notice
that when removing Object instances LSD offers you to choose the specific
instance(s) to delete, or simply eliminate the last one(s) created. </p>

<p class=MsoNormal>Now we have our model structure configured with one instance
of Object <span class=Cdigo>Market</span><b> </b>containing 10 instances of
Object <span class=Cdigo>Firm</span>. To run the simulation we still need to
set the numerical initial values for the <a href="LSD_faqs.html#parameter">Parameters</a>
and <a href="LSD_faqs.html#variable">lagged Variables</a>. While setting the
number of Object instances can be done for the whole model at once, the
configuration of the initial values must be done for each Object instance at a
time. </p>

<p class=MsoNormal>In the <a href="LSD_windows.html#browser">LSD Browser</a>,
make the Object <span class=Cdigo>Firm</span>, which contains the Parameter <span
class=Cdigo>Quality</span> and the lagged Variable <span class=Cdigo>Sales</span>,
the current one. Next, select <span class=Cdigo>Data&gt;Initial Values</span>
in the menu (or click the spreadsheet with a pencil icon or simply press <span
class=Cdigo>Ctrl+I</span>). Alternatively, in the <a
href="LSD_windows.html#modelstructure">LSD Model Structure</a>, right click
directly on the target Object and select <span class=Cdigo>Initial Values</span>
in the context menu. Now, the <a href="LSD_windows.html#initialvalues">LSD
Initial Values Editor</a> window opens and you may edit the initial values for
all Parameters and lagged Variables contained in the current Object.&nbsp;Note
that the hierarchical structure of the LSD models requires the usage of
indexing to identify the Object instance containing the elements requiring
initial values, so the first (brother) <span class=Cdigo>Firm</span> is the
instance numbered 1, the second, 2 and so on. This way the user can set
different initial values for the same Parameter or lagged Variable across
different (brother) Object instances.</p>

<p class=MsoNormal>In the <a href="LSD_windows.html#initialvalues">LSD Initial
Values Editor</a>, you can manually type in each cell a (real) number (press <span
class=Cdigo>Enter</span> on the keyboard to move to the next cell). If the
values to be used for the instances follow any specific rule for the
assignment, you may use the <span class=Cdigo>Set All</span><b> </b>button to
set the values for all or groups of them (see more details on the <a
href="menudata_init.html">LSD manual</a>). For the Object <span class=Cdigo>Firm</span><b>
</b>we need to set the lagged values of <span class=Cdigo>Sales</span><b> </b>and
the level of <span class=Cdigo>Quality</span>. Set the same initial value for <span
class=Cdigo>Sales</span><b> </b>for all firms (say, 100) using the <span
class=Cdigo>Set All</span><b> </b>button, type 100 and select <span
class=Cdigo>Equal to</span> as the initialization method. For <span
class=Cdigo>Quality</span>,<b> </b>set increasing values from 1 in 0.1
increments (1.1, 1.2, …) by selecting the <span class=Cdigo>Increasing</span>
method and typing 1 as the start value and 0.1 as step. </p>

<p class=MsoNormal>Click on <span class=Cdigo>Done</span> when you have
finished setting the initial values for the Object type <span class=Cdigo>Firm</span>
and, move the <a href="LSD_windows.html#browser">LSD Browser</a> to show the <span
class=Cdigo>Market</span> as the current Object (you may simply click on the
label <span class=Cdigo>Market</span><b> </b>in the information bar on the left
of the text “Parent Object”). Next, choose again <span class=Cdigo>Data&gt;Initial
Values</span> in the menu (or click the spreadsheet with a pencil icon or
simply press <span class=Cdigo>Ctrl+I</span>). Enter 0.05 for the Parameter <span
class=Cdigo>a</span><b> </b>value<b> </b>and 1.5 for the Variable <span
class=Cdigo>AverageQuality</span><b> </b>first lag. Notice that <span
class=Cdigo>TotalSales</span> does not show in the <a
href="LSD_windows.html#initialvalues">LSD Initial Values Editor</a> window as
this Variable does not require an initial value because its lagged value is not
used in the Equations.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_Choose_which_data"></a>Choose which data series to save and to
plot at run-time</h1>

<p class=MsoNormal>By default LSD do not save the data produced during a
simulation, so you need to specify the data (time) series you want to observe
after the <a href="LSD_faqs.html#simulationrun">simulation run</a>. Let's save
the series for <span class=Cdigo>AverageQuality</span><b> </b>and <span
class=Cdigo>TotalSales</span><b> </b>in <span class=Cdigo>Market</span>, and <span
class=Cdigo>Sales</span><b> </b>in <span class=Cdigo>Firm</span>. </p>

<p class=MsoNormal>Make the Object Market the current one in the <a
href="LSD_windows.html#browser">LSD Browser</a>, if not already there, and
double click the <a href="LSD_faqs.html#variable">Variable</a> <span
class=Cdigo>TotalSales</span>. This will open the Change Element dialog window,
from where you can edit or modify any property of a Variable or Parameter. Mark
the <span class=Cdigo>Save</span> checkbox to have this Variable included in
the data saved for analysis. Repeat the same procedure for the variable <span
class=Cdigo>AverageQuality</span>, but this time also marking the <span
class=Cdigo>Debug</span> checkbox, so we can trigger the <a
href="LSD_windows.html#debugger">LSD Debugger</a>, interrupting the <a
href="LSD_faqs.html#simulationrun">simulation run</a> immediately after the
computation of the associated <a href="LSD_faqs.html#equation">Equation</a>.</p>

<p class=MsoNormal>Now move the <a href="LSD_windows.html#browser">LSD Browser</a>
to the <span class=Cdigo>Firm</span> Object and double click Variable <span
class=Cdigo>Sales</span>. In the Change Element windows, mark the <span
class=Cdigo>Save</span> and also the <span class=Cdigo>Run-time plot</span>
checkboxes, so the data for it is not just saved but also presented during the <a
href="LSD_faqs.html#simulationrun">simulation run</a> in the <a
href="LSD_windows.html#runtime">LSD Run-time Plot</a> window.</p>

<p class=MsoNormal>These choices can also be changed quickly by means of the
context menu by right clicking on its name on the Variables and Parameters list
box in the <a href="LSD_windows.html#browser">LSD Browser</a>. See the <a
href="browser.html#variables" target=newwindow>LSD manual</a> for details on
these and the remaining element configuration options.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t9></a><a name="_Edit_simulation_settings"></a>Edit simulation
settings</h1>

<p class=MsoNormal>Our example model is now potentially ready to be executed as
a <a href="LSD_faqs.html#simulationrun">simulation run</a>, once it contains
the <a href="LSD_faqs.html#equation">Equations</a>, the <a
href="LSD_faqs.html#modelstruture">model structure</a> and the <a
href="LSD_faqs.html#intialsetting">initial values</a>, and the data to be saved
is configured. </p>

<p class=MsoNormal>By default, LSD runs the simulation for 100 <a
href="LSD_faqs.html#simulationrun">time steps</a>. To change this and other
run-time settings, use the menu option <span class=Cdigo>Run&gt;Simulation Settings</span>
(or click the wrench icon or simply press <span class=Cdigo>Ctrl+M</span>). For
our example, in the field labelled <span class=Cdigo>Simulation steps</span>
type 2000 and keep the remaining fields at the default values. </p>

<p class=MsoNormal>In the Simulation Settings dialog window you may choose not
just the number of time steps per simulation but also the seed for the
pseudorandom number generator and number of simulation exercises to be run in a
sequence. Sequential <a href="LSD_faqs.html#simulationrun">simulation runs</a>
use the same <a href="LSD_faqs.html#modelsetting">model configuration</a>
except for a different random generator seed (increased by 1 each turn).
Running more than one sequential simulation runs cause LSD to automatically
save the results data to files. See the <a href="menurun.html#simsetting"
target=newwindow>LSD manual</a> for more information on these and some further
advanced simulation settings available.</p>

<p class=MsoNormal>Now, the <a href="LSD_faqs.html#modelsetting">model
configuration</a> to run the simulation is complete. As a good practice, save
the configuration to a named model configuration file (.lsd extension) by
choosing menu item <span class=Cdigo>File&gt;Save As</span>, and typing a name
for the configuration, for example <b>trial1 </b>(you do not have to type the <span
class=Cdigo>.lsd</span> extension). You may check the name of the current
configuration at the title bar of all <a href="LSD_windows.html">LSD main
windows</a>.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t10></a><a name="_Run_the_simulation"></a>Run the simulation</h1>

<p class=MsoNormal>Select menu command <span class=Cdigo>Run&gt;Run</span> (or
click on the blue triangle/play icon or simply press <span class=Cdigo>Ctrl+R</span>)
to <a href="LSD_faqs.html#simulationrun">run the simulation</a>. If there are
no unsaved <a href="LSD_faqs.html#modelsetting">model configuration</a> changes,
the simulation will start, in our example, showing the <a
href="LSD_windows.html#runtime">LSD Run-time Plot</a> window which presents the
Variable <span class=Cdigo>Sales</span> time series being produced. If there
are multiple simulation runs configured or unsaved data, LSD issues a
confirmation message, telling how the results data will be handled and/or
confirming the saving of any unsaved configuration change.</p>

<p class=MsoNormal>A <a href="LSD_faqs.html#simulationrun">simulation run
consists in several time steps</a>, during each of which all the <a
href="LSD_faqs.html#variable">Variables</a> of the model are updated, using the
associated <a href="LSD_faqs.html#equation">Equations</a> to compute the new
values.&nbsp;During the simulation run, some Variables time series may be plotted
in the LSD Runt-time Plot window, if they are configured so. If no Variable is
set to be plot during the simulation run, the <a href="LSD_windows.html#log">LSD
Log</a> window may still print information about the ongoing status. If there
are errors the simulation is interrupted immediately and the <a
href="LSD_windows.html#log">LSD Log</a> issues messages suggesting the causes
and possible fixes for the problems.</p>

<p class=MsoNormal>During a <a href="LSD_faqs.html#simulationrun">simulation
run</a> it is possible to use the buttons in the <a href="LSD_windows.html#log">LSD
Log</a> window to control the process: </p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Stop: abort the simulation run (press ‘<span class=Cdigo>S</span>’
as a shortcut);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Pause/Resume: allow the temporary suspension and resume of an
ongoing simulation run (shortcut is ‘<span class=Cdigo>P</span>’ or ‘<span
class=Cdigo>R</span>’), the <a href="LSD_windows.html#debugger">LSD Debugger</a>
being available during the pause period;</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Fast: hides the Run-time Plot window and set Log verbosity to a
minimum to speed-up simulation run (same as the ‘<span class=Cdigo>F</span>’
key);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Observe: show the Run-time Plot windows and enable more verbosity
in the Log window (same as ‘<span class=Cdigo>O</span>’);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Debug: interrupt the simulation run, if not already paused, when
an equation marked to be debugged is computed (the simulation run may be
resumed) (same as ‘<span class=Cdigo>D</span>’);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Copy: copy the selected text in the Log window to the clipboard
(same as ‘<span class=Cdigo>C</span>’ or <span class=Cdigo>Ctrl+C</span>);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Help: help on the Log window (same as ‘<span class=Cdigo>H</span>’).</p>

<p class=MsoNormal>After a simulation run the model configuration remains at
the status of the last time step of the simulation run. That is, every Variable
has the numerical value from the last time its Equation has been computed. LSD
prevents the user to immediately run the simulation again from this state as
this, in fact, would overwrite the model configuration file used to run the
just finished simulation. However, if necessary (usually it is not), the
after-simulation configuration can be saved with a different name and run from
there, like any configuration. </p>

<p class=MsoNormal>Although it is not strictly necessary for writing LSD models,
it is interesting to know the steps being performed when a simulation is run: </p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Set the simulation time counter to 1.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Select <span class=Cdigo>Root</span> as current Object.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Compute the Equation for all the Variables in the current Object, in the
order they are organized.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>Set the descendants of the current Object as new current Object, in the
order they are organized, and repeat steps 3 – 4 on them.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
6.0pt;margin-left:35.7pt;text-indent:-17.85pt'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span>When all Objects of the model have been explored, increase the time
counter by 1 and return to step 2.</p>

<p class=MsoNormal>Note that the cycle described above does not define the
actual order of execution of the Equations. In fact, it is possible that the
computation for an Equation in an upper position of the model (say <span
class=Cdigo>AverageQuality</span><b> </b>in <span class=Cdigo>Market</span>)
requires other Variables to be computed first (<span class=Cdigo>Sales</span> in
<span class=Cdigo>Firm</span>). But the flow of updating described above is
such that the Equation for <span class=Cdigo>AverageQuality</span> begins to be
computed <i>before </i><span class=Cdigo>Sales</span> is updated. LSD records
every value for a Variable along with the time step in which it was computed.
Therefore, it knows that <span class=Cdigo>Sales</span> need to be updated
before completing the Equation for <span class=Cdigo>AverageQuality</span>, and
automatically computes the Equation for each instance of Variable <span
class=Cdigo>Sales</span> before completing <span class=Cdigo>AverageQuality</span>
calculation. When a Variable instance already computed is reached by the
standard simulation cycle, or it is requested again in the course of computing
another Variable, LSD does not recalculate it. Instead, it reuses the same
value already computed the first time during that time step. </p>

<p class=MsoNormal>Modelers can also decide to use a special kind of “variable”
called <a href="LSD_faqs.html#function">Function</a> which is recomputed as
many times as it is requested, even many times during the same time step.
Functions also should have an <a href="LSD_faqs.html#equation">Equation</a>
assigned in the <a href="LSD_faqs.html#equationfile">equation file</a>. </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t11></a><a name="_Fix_logical_errors"></a>Fix logical errors</h1>

<p class=MsoNormal>During the <a href="LSD_faqs.html#modelprogram">LSD model
program</a> <a href="LSD_faqs.html#compiler">compilation</a> it is possible to
discover errors in the model code (i.e., the <a href="LSD_faqs.html#equation">Equations</a>
in the <a href="LSD_faqs.html#equationfile">equation file</a>) due to illegal <a
href="LSD_faqs.html#c">C++</a> or LSD keywords or syntax. However, only during
a <a href="LSD_faqs.html#simulationrun">simulation run</a> it is possible to
identify (run-time) errors due to the design of the model (Equations and <a
href="LSD_faqs.html#modelsetting">model configuration</a>). </p>

<p class=MsoNormal>Whenever there is a run-time error during a model simulation
run, LSD writes message to the <a href="LSD_windows.html#log">LSD Log</a>
window. Typical errors and the recommended fixes are presented in the <a
href="LSD_quickhelp.html#errors">Quick help</a>.  </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t12></a><a name="_Analyze_the_simulation"></a>Analyze the
simulation run results</h1>

<p class=MsoNormal>After the simulation is successfully finished (or even
aborted after some time steps), select the menu option <span class=Cdigo>Data&gt;Analysis
of Results</span> (or click in the plot icon or simply press <span class=Cdigo>Ctrl+A</span>)
in the <a href="LSD_windows.html#browser">LSD Browser</a>. This command
presents the list of all the time series stored in memory after the last <a
href="LSD_faqs.html#simulationrun">simulation run</a> in the <a
href="LSD_windows.html#analysisofresults">LSD Analysis of Results</a> window.
Previously saved data files, from older simulation runs, can also be loaded in
memory for analysis using the <span class=Cdigo>Add…</span> button.</p>

<p class=MsoNormal>The overall structure of the <a
href="LSD_windows.html#analysisofresults">LSD Analysis of Results</a> window is
composed by the list box, on the left, of the elements with available time
series for analysis. Some (or all) of these must be selected by double clicking
the desired series, using the vertical button bar or using the context (right
click) menu. Once one (or more) series are selected, it is shown in the central
list box and is ready for further elaboration. Using the buttons in the lower
part of the window, the user can create plots, produce statistics on and export
the selected series. The right box contains the list of the plots already
produced in the current session, for quick reload. </p>

<p class=MsoNormal>For each available series it is reported the name of the
Variable, a multi-digit code, and the initial and final time step range in
which the Variable existed (for Objects created or destroyed during the
simulation run). The multi-digit code contains as many digits as the
hierarchical level of the Object containing the Variable. For example, the
Variable <span class=Cdigo>Sales</span> for the third Firm has the code “1_3”,
meaning it is contained in the third <span class=Cdigo>Firm</span> Object
instance contained, in turn, in the first <span class=Cdigo>Market</span>
instance. </p>

<p class=MsoNormal>For instance, select a few of the available <span
class=Cdigo>Sales</span> series (double click each) and click on the <span
class=Cdigo>Plot</span> button to generate a time series plot of all the <a
href="LSD_faqs.html#simulationrun">simulation run time steps</a>. Next, click
on <span class=Cdigo>Statistics</span> to see some descriptive statistics about
the series printed in the <a href="LSD_windows.html#log">LSD Log</a> window. </p>

<p class=MsoNormal>You may try to further explore the data available (see the <a
href="menudata_res.html" target=newwindow>manual</a> on this topic for
details). There are a large number of possible options to produce time series
and cross-section plots, XY scatterplots, histograms, and more. Moreover, users
can save selected data to files in a variety of formats. It is also possible to
launch Gnuplot, a package for advanced function and data plotting.</p>

<p class=MsoNormal>Further and more advanced statistical analysis and
data-charting resources are available at the R platform, including transparent
usage of LSD hierarchical results data and sensitivity analysis, using the <a
href="LSD_faqs.html#R">LSD-specific R packages</a>. </p>

<p class=MsoNormal>When the analysis of the results is done (and all the
required plots and data are already saved), use menu <span class=Cdigo>Exit&gt;Quit
and Return to Browser</span> (or click on the X in the title bar or simply
press <span class=Cdigo>Esc</span>).</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t13></a><a name="_Test_different_configurations"></a>Test different
configurations</h1>

<p class=MsoNormal>To create a new <a href="LSD_faqs.html#modelsetting">model
configuration</a> based on another one, first (re) load the desired
configuration using menu <span class=Cdigo>File&gt;Load</span> (or click the
yellow folder icon or simply press <span class=Cdigo>Ctrl+L</span>) or <span
class=Cdigo>File&gt;Reload</span> (or click the green recycle icon or simply
press <span class=Cdigo>Ctrl+W</span>), according to the case. Next, do the
modifications to the <a href="LSD_faqs.html#modelstruture">model structure</a>,
<a href="LSD_faqs.html#intialsetting">initial values</a> and the remaining
settings. Finally, save the model configuration using menu <span class=Cdigo>File&gt;Save
As</span>, choosing a different file name. Now, you can test the new model
configuration by running it using menu command <span class=Cdigo>Run&gt;Run</span>
(or click on the blue triangle/play icon or simply press <span class=Cdigo>Ctrl+R</span>).
</p>

<p class=MsoNormal>For a detailed account on how to experiment with alternative
model configurations, see this <a href="model_using.html" target=newwindow>tutorial</a>.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t14></a><a name="_Generate_the_Model"></a>Generate the Model Report</h1>

<p class=MsoNormal>Understanding the functioning of a model means to know the
elements of the model (<a href="LSD_faqs.html#object">Objects</a>, <a
href="LSD_faqs.html#variable">Variables</a> and <a
href="LSD_faqs.html#parameter">Parameters</a>) and how they relate to each
other. This means to know the <a href="LSD_faqs.html#modelstructure">structure
of the model</a> and all the connections between them. For instance, to know in
which Equation(s) a certain Parameter is used. For the modeler this is crucial
information when modifying the model <a href="LSD_faqs.html#equationfile">code</a>
or its <a href="LSD_faqs.html#modelsetting">configuration</a>. That is the
purpose of the <a href="LSD_faqs.html#modelreport">model reports</a>. </p>

<p class=MsoNormal>Select option <span class=Cdigo>Model&gt;Create Model Report</span>
to generate a detailed report about the model. Accept the default options in
the Report Generation window and click in <span class=Cdigo>OK</span>. The
produced report should be automatically presented in your web browser. At any
time the model report can be retrieved again using the menu option <span
class=Cdigo>Help&gt;Model Report</span>.</p>

<p class=MsoNormal>The main model report is a standard HTML document that can
be loaded in any web browser (e.g., Chrome).&nbsp;The model report is a hyperlinked
document containing the entire model information in a convenient format. The
hyperlinks permit to see: </p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>a textual description of the model, with and indication of the
key elements to observe and configure (if provided by the modeler);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>the <a href="LSD_faqs.html#modelstructure">hierarchy tree</a> of
Objects;</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>details on each <a href="LSD_faqs.html#object">Object</a> and its
content;</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>details on each <a href="LSD_faqs.html#parameter">Parameter</a>
and <a href="LSD_faqs.html#variable">lagged Variable</a> initial values;</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>where each element is used (e.g., the Variables using a specific
Parameter);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>which elements are used to calculate each Variable (e.g., the
Parameters used in a Variable's <a href="LSD_faqs.html#equation">Equation</a>);</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>the Equation code for each Variable, with links to the used
elements.</p>

<p class=MsoNormal>LSD permits to add to each element in the model a textual
description as well a description for the <a href="LSD_faqs.html#intialsetting">initial
values</a> setting, when appropriate, both of which are available for editing
in the Change Element window. This information is also automatically included
in the model report. It is also possible to request the system to automatically
retrieve the description text from the equation file using the <span
class=Cdigo>Auto Descr.</span> button. Also, the <span class=Cdigo>Set All</span>
button in the <a href="LSD_windows.html#initialvalues">LSD Initial Values
Editor</a> updates automatically the initialization description text. </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<h1><a name=t15></a><a name="_Extend_the_model"></a>Extend the model</h1>

<p class=MsoNormal>A crucial rule when developing simulation models is to
advance gradually, adding elements (and complexity) to the model in phases. LSD
allows the easy addition of new elements to an existing model. </p>

<p class=MsoNormal>As the final exercise in this tutorial, let's add a new <a
href="LSD_faqs.html#variable">Variable</a> to our example model. Its role is to
compute the market shares of the firms in the market. For this we need to add
an <a href="LSD_faqs.html#equation">Equation</a> to the <a
href="LSD_faqs.html#equationfile">equation file</a>, and to include the
Variable reference in the <a href="LSD_faqs.html#modelsetting">model
configuration</a>. </p>

<p class=MsoNormal>If still open, close the <a href="LSD_windows.html#browser">LSD
Browser</a> and open or go to <a href="LSD_windows.html#lmm" target=newwindow>LMM</a>,
open the model and edit the equation FIle (menu <span class=Cdigo>Model&gt;Show
Equations</span> or click the white sheet with the C++ icon or simply press <span
class=Cdigo>Ctrl+e</span>). Move the text cursor in a valid position (within
the lines <span class=Cdigo>MODELBEGIN</span> and <span class=Cdigo>MODELEND</span>
and outside any existing Equation). Press <span class=Cdigo>Ctrl+Shift+e</span>
to insert a new Equation (or use the right-click context menu, option <span
class=Cdigo>LSD Macros</span>), and name the Variable as <span class=Cdigo>ms</span>.
</p>

<p class=MsoNormal>The complete block for the <span class=Cdigo>ms</span>
Equation is: </p>

<p class=MsoNormal><span class=Cdigo>EQUATION(&quot;ms&quot;) <br>
</span><span class=Cdigo><span style='color:#00B050'>/* <br>
Market shares <br>
*/ <br>
</span>v[0]=V(&quot;Sales&quot;); <br>
v[1]=V(&quot;TotalSales&quot;); </span></p>

<p class=MsoNormal><span class=Cdigo>RESULT( v[0]/v[1] ) </span></p>

<p class=MsoNormal>Now you have a new Equation defining that the market shares
(Variable <span class=Cdigo>ms</span>) must be computed as the ratio between <span
class=Cdigo>Sales</span> and <span class=Cdigo>TotalSales</span>. Save the
equation file (menu <span class=Cdigo>File&gt;Save</span> or click the blue
floppy disk icon or simply press <span class=Cdigo>Ctrl+s</span>) and compile
and run the model program (menu <span class=Cdigo>Run&gt;Run</span> or click
the blue play/triangle icon or simply press <span class=Cdigo>Ctrl+r</span>). </p>

<p class=MsoNormal>When the <a href="LSD_windows.html#browser">LSD Browser</a>
window appears, open one of the existing <a href="LSD_faqs.html#modelsetting">model
configuration</a> files (menu <span class=Cdigo>File&gt;Load</span> or click
the yellow folder icon or simply press <span class=Cdigo>Ctrl+L</span>). Note
that you may run the existing model configuration unchanged as the new <a
href="LSD_faqs.html#equation">Equation</a> code does not interfere with the
previous Equations. However, as no <a href="LSD_faqs.html#variable">Variable</a>
named <span class=Cdigo>ms</span> exists in the configuration, the new Equation
for it would not be used. </p>

<p class=MsoNormal>Now, move the <a href="LSD_windows.html#browser">LSD Browser</a>
to point to the Object <span class=Cdigo>Firm</span><b> </b>(or double click on
<span class=Cdigo>Firm</span><b> </b>in the <a
href="LSD_windows.html#modelstructure">LSD Model Structure</a> window). There, insert
the new Variable <span class=Cdigo>ms</span>: choose menu <span class=Cdigo>Model&gt;Add
Variable</span> (or press <span class=Cdigo>Ctrl+v</span>), and name it “ms”,
with 0 maximum lags. </p>

<p class=MsoNormal>Finally, double click on the newly inserted <span
class=Cdigo>ms</span> in the <a href="LSD_windows.html#browser">LSD Browser</a>
list of Variables and mark the <span class=Cdigo>Save</span> checkbox. This
way, the values of the market shares will be saved during the simulation run. </p>

<p class=MsoNormal>Now re-run the simulation. The modified configuration will
be automatically saved, under the same file name. Open the <a
href="LSD_windows.html#analysisofresults">LSD Analysis of Results</a> window
and observe the results for <span class=Cdigo>ms</span>.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'>&#9650;<a href="#top">Top</a></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin:0cm;margin-bottom:.0001pt'>&nbsp;</p>

</div>

</body>

</html>

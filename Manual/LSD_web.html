<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<title>LSD Manual</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
h1
	{mso-style-link:"Título 1 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
h2
	{mso-style-link:"Título 2 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h3
	{mso-style-link:"Título 3 Char";
	margin-top:36.0pt;
	margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Título Char";
	margin-right:0cm;
	margin-left:0cm;
	text-align:center;
	font-size:18.0pt;
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
tt
	{font-family:"Courier New";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Texto de balão Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
span.Ttulo1Char
	{mso-style-name:"Título 1 Char";
	mso-style-link:"Título 1";
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
span.Ttulo2Char
	{mso-style-name:"Título 2 Char";
	mso-style-link:"Título 2";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.Ttulo3Char
	{mso-style-name:"Título 3 Char";
	mso-style-link:"Título 3";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.TtuloChar
	{mso-style-name:"Título Char";
	mso-style-link:Título;
	font-family:"Arial","sans-serif";
	color:#254061;
	font-weight:bold;}
span.TextodebaloChar
	{mso-style-name:"Texto de balão Char";
	mso-style-link:"Texto de balão";
	font-family:"Tahoma","sans-serif";}
p.msolistparagraphcxspfirst, li.msolistparagraphcxspfirst, div.msolistparagraphcxspfirst
	{mso-style-name:msolistparagraphcxspfirst;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.msolistparagraphcxspmiddle, li.msolistparagraphcxspmiddle, div.msolistparagraphcxspmiddle
	{mso-style-name:msolistparagraphcxspmiddle;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.msolistparagraphcxsplast, li.msolistparagraphcxsplast, div.msolistparagraphcxsplast
	{mso-style-name:msolistparagraphcxsplast;
	margin-right:0cm;
	margin-left:36.0pt;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.msochpdefault, li.msochpdefault, div.msochpdefault
	{mso-style-name:msochpdefault;
	margin-right:0cm;
	margin-left:0cm;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";}
span.Cdigo
	{mso-style-name:Código;
	font-family:"Courier New";
	color:gray;}
.MsoChpDefault
	{font-size:10.0pt;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 3.0cm 70.85pt 3.0cm;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 -->
</style>

<link rel=icon href="image/lsd.png">
<meta name=Author content="LSD - Laboratory for Simulation Development">

<iframe name=navbar src=navbar.html scrolling=no style='position:fixed;
 border-bottom-style:none;border-left-style:none;border-right-style:none;
 border-top-style:none;height:55px;left:0in;overflow:hidden;right:0in;
 top:0in;width:100%'>
</iframe>

</head>

<body lang=EN-US link=blue vlink=purple>

<div class=WordSection1>

<p class=MsoTitle>&nbsp;</p>

<p class=MsoTitle>LSD Web Interface</p>

<p>The manual explains the configuration and the usage of the LSD web interface
(LWI). LWI allows LSD models to be operated using a standard HTML web browser
interface and to be available to users in the open internet, without the need to
install LSD in the users’ computers.</p>

<h1>Table of contents </h1>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:32.05pt;text-indent:-17.85pt'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><span class=MsoHyperlink><a href="#_Introduction">Introduction</a></span>
to what is the LSD Web Interface.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:32.05pt;text-indent:-17.85pt'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><a href="#_Installation_of_LSD">Installation</a> of the LSD web server.</p>

<p class=MsoListParagraph style='margin-top:5.0pt;margin-right:0cm;margin-bottom:
12.0pt;margin-left:32.05pt;text-indent:-17.85pt'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><a href="#_Customizing_the_LSD">Customizing</a> the LSD Web Interface.</p>

<p class=MsoListParagraph style='margin-left:32.2pt;text-indent:-18.0pt'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span>Configuring,
running and analyzing results of LSD models <a href="#_LSD_web_interface">using
the web interface</a>.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_Introduction"></a><span class=Ttulo1Char>Introduction</span></h1>

<p>This manual presents the user-friendly, web-based interface to LSD (LWI).
LWI makes a basic subset of the LSD tools available for web browser users,
allowing the configuration, execution, and analysis of results produced by LSD
models and the export of such data. <a href="#_LSD_web_interface">LWI web
front-end</a> is compatible with any computer platform equipped with a modern
HTML5 browser and can be made available in closed (intranet) or open (internet)
networks. </p>

<p>As a web interface to existing LSD models, LWI does not add new
functionalities to them. However, it allows a simplified access to LSD models
to users which lack the technical knowledge to operate the full LSD interface,
or use a platform (smartphone, tablet etc.) in which LSD is not available for
installation. LWI can be integrated to any HTML-based <a
href="#_Server_requirements">web server</a> platform. LWI, per se, does not
provide accounts or persistent storage to users, which can be provided by the
host web platform. </p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name=install></a><a name="_Installation_of_LSD"></a><a
name="_Installation_of_the"></a>Installation of the LSD web server</h1>

<p>This manual presents the configuration of LSD Web Interface (LWI) back-end
(server setup) to provide the web-based interface to LSD models to the end users.
LWI web back-end is compatible with any web server platform equipped with a
modern HTTP server supporting PHP server scripting. In principle any relatively
recent Linux or Windows 64-bit server is adequate for hosting LWI. </p>

<p>This section of the manual is not intended to be a guide to unexperienced
server operators, as a minimum knowledge of server administration is required.
Some experience on operating in the command line is also a pre-requisite.</p>

<p>This section is organized in three subsections. Initially, we describe the
minimum hardware and software <a href="#_Server_requirements">requirements for
the server</a> environment. The second subsection presents the detailed
instructions to <a href="#_Server_setup">install and configure the server</a>.
Next, the <a href="#_Apache_and_PHP">web software configuration</a> is
explored. The fourth subsections details the <a href="#_LWI_installation_and">LWI
software installation</a>. Finally, the last section discusses some maintenance
issues associated with the <a href="#_Server_maintenance">operation of the LWI
server</a>.</p>

<h2><a name="_Server_requirements"></a>Server requirements</h2>

<p>The LWI server must be able to efficiently execute a complex, computed intensive
simulation process for each LWI user session actively running a simulation (an
“executing session”). Each LWI executing session must get sufficient server
resources to produce an adequate experience to the end user. Such requirement
defines the specification of the hardware recommended for the server. On the
software side, there are no strong requirements on the server configuration,
being both Linux and (modern) Windows servers supported. Mac servers are
supported only as a test platform. No additional special/proprietary software
is strictly required by LWI.</p>

<p>LWI can be operated on any modern server platform. The instructions below
assume a 64-bit Intel/AMD server for convenience. Different platforms would
require a recompiled version of LWI executables (supported on any platform with
a GCC compiler available). LWI can be operated in production servers,
supporting multiple simultaneous users, but also in small-scale
test/development servers.</p>

<p>LWI can be deployed on any web server supporting HTTP 1.1. This includes
Apache, Microsoft IIS and others. However, the recommended (tested)
configuration is based on Apache HTTP Server version 2.4, which is available
for Linux, Microsoft Windows and Apple macOS server platforms, among others.
For downloading the appropriate version of Apache, please visit <a
href="https://httpd.apache.org">https://httpd.apache.org</a>. </p>

<p>Additionally, the LWI requires support to PHP version 5.6 (or newer), which
is natively supported by both Apache and Microsoft IIS on Linux and Windows
servers. For downloading the appropriate version of PHP, please visit <a
href="http://php.net">http://php.net</a>. </p>

<p>The LWI server typically operates on non-critical and non-sensitive data. On
top of that, there is no long-term data storage of user data. Also, the level
of user access to the server is minimal, exclusively done through HTTP (web
pages) and PHP (simulation configuration results files). This should alleviate
the security requirements when the server is used exclusively for LWI.</p>

<h2><a name="_Server_setup"></a>Server setup</h2>

<p>We assume the basic operating system is installed using the default
installation options. The instructions require a server supporting a bash-like
shell, typically any Linux distribution or a recent Microsoft Windows 10+
version with the Windows Subsystem for Linux (WSL) installed. In the
instructions below Ubuntu 16.04 LTS and CentOS 7.4 servers are used as examples
but the installation steps can be adapted for installation on any server
platform and distribution.</p>

<p>If a Linux server is selected, please install the server software following
the appropriate instructions for the selected distribution. </p>

<p>If a Windows server is selected, please install the last version of
Microsoft Windows Server. Both Apache and PHP can be installed in Microsoft
Windows servers in two modes: native Windows or using the Windows Subsystem for
Linux (WSL). For the unification of the setup instructions, WSL mode was
chosen. However, the steps to setup using native mode are quite similar and
easily adaptable and should be the preferred approach in most cases. A regular
Windows 10 desktop (build 1709 or newer) may be used to deploy a test server
(small capacity) following the same instructions. Please enable WSL <i>before</i>
proceeding.</p>

<p>Recent macOS computers (version 10.13 or newer) already come bundled with
pre-configured versions of Apache and PHP. macOS is not supported for
production servers.</p>

<h2><a name="_Apache_and_PHP"></a>Apache and PHP installation and configuration</h2>

<p>For Ubuntu and Windows WSL servers, install the required packages
individually using the bash terminal:</p>

<p><span class=Cdigo>sudo apt install httpd php</span></p>

<p>On CentOS, the installation command is:</p>

<p><span class=Cdigo>sudo yum install httpd php</span></p>

<p>macOS servers already come with the packages installed.</p>

<p>Next (re)start the web server. On Ubuntu and Windows WSL:</p>

<p><span class=Cdigo>sudo service apache2 restart</span></p>

<p>On CentOS:</p>

<p><span class=Cdigo>sudo systemctl start httpd.service</span></p>

<p><span class=Cdigo>sudo systemctl enable httpd.service</span></p>

<h2><a name="_LWI_installation_and"></a>LWI installation and configuration</h2>

<p>Now we have to install LWI files in the web server. LWI files are stored in
a single subdirectory tree, inside the directory used by the HTTP server to
host the website files. In the case of an Apache on Ubuntu, Windows WSL or
CentOS configuration, the HTTP server directory for the website is <span
class=Cdigo>/var/www</span>. This location may be different according to the
adopted combination of HTTP server and operating system/distribution.</p>

<p>Each LWI installation supports a single <a href="LSD_faqs_arquivos#model">LSD
model</a> under a unique baseline <a href="LSD_faqs_arquivos#simsetting">configuration</a>
(see <a href="#_Customizing_the_LWI">below</a>). If different models or
configurations must be supported, it is necessary to configure multiple virtual
web servers (in a single physical server), installing one independent LWI
instance (different directory) for each virtual server. Please refer Apache documentation
on how to set up virtual web servers.</p>

<p>To start, please copy the provided LWI subdirectory inside your LSD
installation directory (normally at <span class=Cdigo>~/Lsd/lwi</span>) to the
appropriate web server directory. On Ubuntu, Windows/WSL and CentOS use the
following terminal command:</p>

<p><span class=Cdigo><span lang=PT-BR>sudo cp -R ~/Lsd/lwi /var/www/</span></span></p>

<p>In macOS:</p>

<p><span class=Cdigo>sudo cp -R ~/Lsd/lwi /Library/WebServer/Documents/</span></p>

<p><span lang=EN-GB>The structure of LWI subdirectory tree is the following:</span></p>

<p align=center style='text-align:center'><img border=0 width=407 height=120
src="image/lwi_files.png"></p>

<p>In <span class=Cdigo>lwi</span> subdirectory are kept all PHP-only files
(the ones not directly accessed by the user browser), including executable and
configuration files. The <span class=Cdigo>lwi/tmp</span> subdirectory holds
session-related PHP server temporary files, deleted periodically (check the
Maintenance section). The <span class=Cdigo>lwi/public_html</span> subdirectory
holds the files visible to the user browser. The <span class=Cdigo>lwi/public_html/tmp</span>
subdirectory holds the session-related, temporary user files
(downloaded/uploaded simulation configurations and simulation results), also
deleted periodically. The user/group associated to the HTTP and the PHP server
(<span class=Cdigo>www-data</span> in Ubuntu, <span class=Cdigo>apache</span>
in CentOS, etc.) must have read-write to the entire <span class=Cdigo>lwi</span>
subdirectory tree (the default configuration).</p>

<p><span lang=EN-GB>The provided files must yet be set with all required file
permissions/ownership for a typical setup. Usually it is enough to adjust the
ownership. For Ubuntu and Windows use:</span></p>

<p><span class=Cdigo>sudo chown -R www-data:www-data /var/www/lwi<br>
sudo chmod g+w /var/www/lwi/tmp<br>
sudo chmod g+w /var/www/lwi/public_html/tmp</span></p>

<p>For CentOS, because of SELinux, a longer setup is required: </p>

<p><span class=Cdigo>sudo chown -R apache:apache /var/www/lwi<br>
sudo chmod g+w /var/www/lwi/tmp<br>
sudo chmod g+w /var/www/lwi/public_html/tmp<br>
sudo semanage fcontext -a -t httpd_sys_content_t &quot;/var/www/lwi(/.*)?&quot;<br>
sudo semanage fcontext -a -t httpd_sys_rw_content_t
&quot;/var/www/lwi/tmp(/.*)?&quot;<br>
sudo semanage fcontext -a -t httpd_sys_rw_content_t
&quot;/var/www/lwi/public_html/tmp(/.*)?&quot;<br>
sudo restorecon -F -R -v /var/www/lwi<br>
sudo setsebool -P httpd_builtin_scripting on<br>
sudo setsebool -P httpd_can_sendmail on<br>
sudo setsebool -P httpd_execmem on<br>
sudo setsebool -P httpd_ssi_exec on</span></p>

<p><span lang=EN-GB>For macOS:</span></p>

<p><span class=Cdigo><span lang=EN-GB>sudo chown -R :_www
/Library/WebServer/Documents/lwi</span></span></p>

<p>It is now necessary to configure the Apache web server to use LWI as the web
entry point (virtual web server). Use the following commands to adjust the
entry point in Ubuntu and Windows/WSL servers (replace <span class=Cdigo>000-default</span>
by the name of your configuration, if changed from the installation default): </p>

<p><span class=Cdigo>sudo cp /var/www/lwi/lwi.conf /etc/apache2/sites-available<br>
sudo a2dissite 000-default<br>
sudo a2ensite lwi<br>
sudo service apache2 reload</span></p>

<p>For CentOS, the command is:</p>

<p><span class=Cdigo>sudo bash -c 'cat /var/www/lwi/vhost.conf &gt;&gt;
/etc/httpd/conf.d/vhost.conf'<br>
sudo systemctl restart httpd.service</span></p>

<p>If you have a more complex server setup (more than one virtual web server in
a single domain, for instance), you may need to adjust the files <span
class=Cdigo>lwi.conf</span> or <span class=Cdigo>vhost.conf</span> to your
needs.</p>

<p>In macOS the setup is more complicated. Edit the Apache webserver
configuration file in <span class=Cdigo>nano</span> (text editor) to enable PHP
and use LWI as the default website:</p>

<p><span class=Cdigo><span lang=IT>sudo nano /etc/apache2/httpd.conf</span></span></p>

<p>In <span class=Cdigo>nano</span>, search (<span class=Cdigo>CTRL+W</span>)
for the line starting with <span class=Cdigo>#LoadModule php7_module</span> and
delete the <span class=Cdigo>#</span> character from it, uncommenting the line.</p>

<p>Still in <span class=Cdigo>nano</span>, please search (<span class=Cdigo>CTRL+W</span>)
for the line containing <span class=Cdigo>DocumentRoot
&quot;/Library/WebServer/Documents&quot;</span> (or another path) and replace
it with:</p>

<p><span class=Cdigo>DocumentRoot
&quot;/Library/WebServer/Documents/lwi/public_html&quot;</span></p>

<p>Now find the line containing <span class=Cdigo>&lt;Directory &quot;
/Library/WebServer/Documents&quot;&gt;</span> (or another path, should be below
the previous one) and replace it by:</p>

<p><span class=Cdigo>&lt;Directory
&quot;/Library/WebServer/Documents/lwi/public_html&quot;&gt;</span></p>

<p>Save the configuration and close nano (<span class=Cdigo>CTRL+X</span>, <span
class=Cdigo>Y</span>, <span class=Cdigo>ENTER</span>). Finally, start the
webserver:</p>

<p><span class=Cdigo>sudo apachectl start</span></p>

<p>If server is already running, simply reload it so the new configuration is
used:</p>

<p><span class=Cdigo>sudo apachectl restart</span></p>

<p><a name=openbrowser></a>Your LWI server should be up and running now. You can
test it using a browser in the same machine using the address <span
class=Cdigo>http://localhost</span>. You can also access the server from other
machines connected in the same local network by using the server IP address (or
the DNS name, if you have one assigned). To get the server IP address(es), type
the command:</p>

<p><span class=Cdigo>ifconfig | grep &quot;inet addr&quot;</span></p>

<p>You can then access the server typing (one of) the IP addresses in your
browser (as in <span class=Cdigo>http://192.168.1.152</span>, for example) in
any machine connected in the same local network.</p>

<p>Some servers may have the IP ports below 1024 unavailable for non-system
applications like Apache (and you can access the server only in the same
machine). This is a known limitation of Windows computers. In this case, a port
above 1024 (8080, for instance) must be used.</p>

<p>LWI offers a link for the users to post messages to the site administrator.
To enable this functionality in a Linux environment, the <span class=Cdigo>sendmail</span>
package (or a more recent equivalent, like <span class=Cdigo>postfix</span>)
must be configured in the server.</p>

<h2><a name="_Server_maintenance"></a>Server maintenance</h2>

<p>The LWI server usually requires no particular maintenance care if set up
properly. Except for the points discussed below, for all maintenance tasks on
the LWI server, like backups, software updating, security audits, storage
clean-up etc., please follow the usual (basic) standard web server guidelines.</p>

<p>The only special maintenance task in a LWI server is to manage temporary
storage utilization. This is important as, per the default LWI installation,
over time the server may accumulate temporary files from the user sessions. If
nothing is done, the server may eventually run out of storage space, even if at
a very slow pace. The LWI server accumulates temporary files in just two
subdirectories:</p>

<p><span class=Cdigo>/var/www/lwi/tmp<br>
/var/www/lwi/public_html/tmp</span></p>

<p>Those are paths on an Apache on Ubuntu or CentOS setup. For other
configurations please replace <span class=Cdigo>/var/www</span> with the
appropriate subdirectory.</p>

<p>LWI temporary files are used/valid only while the corresponding user
sessions are active and cannot be retrieved by the users after that. As PHP
sessions are usually configured to last less than 24 hours (the default is 3
hours), it is recommended that files older than 2 days to be permanently
deleted. In most Linux configurations, the temporary file clean up can be
performed automatically using a <span class=Cdigo>cron</span> job. Of course,
other similar tools can be used, in any platform. To configure a <span
class=Cdigo>cron</span> job, please first create the following script file in
the server and name it <span class=Cdigo>lwi-cleanup</span>:</p>

<p><span class=Cdigo>nano lwi-cleanup</span></p>

<p>Enter the following lines and save the file in <span class=Cdigo>nano</span>
(<span class=Cdigo>CTRL+X</span>, <span class=Cdigo>Y</span>, <span
class=Cdigo>ENTER</span>):</p>

<p><span class=Cdigo>#!/bin/sh<br>
find /var/www/lwi/tmp /var/www/lwi/public_html/tmp -type f -mtime +2 -delete</span></p>

<p>Please adjust the directory paths to your particular configuration, if
needed.</p>

<p>Then, make the script file executable using:</p>

<p><span class=Cdigo>chmod a+x lwi-cleanup</span></p>

<p>Finally, copy the script file to the <span class=Cdigo>cron</span> daily
directory:</p>

<p><span class=Cdigo>sudo cp lwi-cleanup /etc/cron.daily</span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_Customizing_the_LSD"></a><a name=customize></a>Customizing the
LSD Web Interface</h1>

<p class=MsoNormal>The LSD Web Interface (LWI) can be customized to any
existing <a href="LSD_faqs.html#model">LSD model</a>. The customization
consists in <a href="#_Producing_the_baseline">(1)</a> producing an adequate <a
href="LSD_faqs.html#modelprogram">executable version</a> of the model, together
with a full baseline <a href="LSD_faqs.html#modelsetting">configuration</a>, <a
href="#_Selecting_the_Parameters">(2)</a> selecting which <a
href="LSD_faqs.html#parameter">Parameters</a> and <a
href="LSD_faqs.html#variable">Variable initial conditions</a> should be exposed
for the configuration by the user, as well the allowed value ranges, <a
href="#_Defining_the_Variables">(3)</a> defining for which <a
href="LSD_faqs.html#results">result Variables</a> the model’s output should be
presented to the user, <a href="#_Installing_the_new">(4)</a> installing the
produced configuration in the <a href="#_Installation_of_the">LWI server</a>,
and <a href="#_Customizing_the_LWI">(5)</a> customizing the LWI server for the
model. The customization is performed using standard LSD commands and
configuration files, as described below.</p>

<p class=MsoNormal>The default configuration of LWI after the installation of
LSD brings the Schumpeterian Competition Model by Nelson &amp; Winter (1983)
(available in the <span class=Cdigo>Example Models</span> group of the <a
href="modelbrowser.html">LSD Model Browser</a>, under <span class=Cdigo>Literature
Models/nw2004</span>). It is strongly recommended the user test the LWI server
configuration with this configuration <i>before</i> trying to customize it to
other models.</p>

<h2><a name="_Producing_the_baseline"></a>Producing the baseline simulation
model executable</h2>

<p class=MsoNormal>The first step of making a <a href="LSD_faqs.html#model">LSD
simulation model</a> available for use with LWI is to create a baseline <a
href="LSD_faqs.html#modelsetting">configuration file</a> (<span class=Cdigo>.lsd</span>
extension) using the <a href="browser.html">LSD Browser</a>. The baseline
configuration is automatically loaded whenever a LWI user <a href="#_Why_LSD?">starts
a session</a> or <a href="#_Configuration_page">reset it to the defaults</a>. </p>

<p class=MsoNormal>Please ensure that the chosen configuration is robust to
multiple simulation runs, using different <a href="menurun.html#simsetting">random
number generator seeds</a>, to avoid the <a href="#_LSD_web_interface">LWI user
sessions</a> to crash. Also ensure the configuration is set for a <a
href="menurun.html#simsetting">single simulation run</a> (if multiple runs are
set, just the last one will be presented). Save your configuration file in the
LSD Browser with the name <span class=Cdigo>lwi.lsd</span>. using the menu
command <span class=Cdigo><a href="menufile.html#save">File&gt;Save As</a></span>.</p>

<p class=MsoNormal>The second step is to produce a ‘No Window’ version of the <a
href="LSD_faqs.html#modelprogram">LSD model program</a>. This is an executable
file named <span class=Cdigo>lsd_gnuNW</span> (plus a <span class=Cdigo>.exe</span>
extension in Windows, or an <span class=Cdigo>x</span> attribute in
Linux/macOS) which will be invoked by the <a href="#install">LWI server</a>
every time a LWI user <a href="#_Execution_section">starts a simulation</a>.
The ‘No Window’ model program can be generated in <a href="LMM.html">LMM</a>,
by using the menu command <span class=Cdigo><a href="LMM.html#nowindow">Model&gt;Create
'No Window<span style='font-family:"Arial","sans-serif"'> </span>' Version</a></span>.
</p>

<p class=MsoNormal>Please note that the model program must be generated in a
computer using the same operating system version as the LWI server (or in the
server itself). If this is not possible (e.g., it is a headless server), it is
possible to compile the ‘No Window’ model program using a terminal session in
the server, see the instructions <a href="LMM.html#nowindow">here</a>.</p>

<h2>Selecting the Parameters and Variables to configure</h2>

<p class=MsoNormal>The <a href="LSD_faqs.html#parameter">Parameters</a> and <a
href="LSD_faqs.html#variable">Variable initial conditions</a> which are to be
exposed for the LWI users to configure must be defined in a sensitivity
analysis file (<span class=Cdigo>.sa</span> extension) using the <a
href="browser.html">LSD Browser</a>. Parameters and lagged Variables not
included in this file are not presented to the user and always assume the values
defined in the baseline configuration (<span class=Cdigo>lwi.lsd</span>).</p>

<p class=MsoNormal>To create the sensitivity analysis file, first make sure the
baseline configuration is loaded in the LSD Browser using the menu command <span
class=Cdigo><a href="menufile.html#load">File&gt;Load</a></span>. Next, for
each Parameter and lagged Variable to be included, select the desired element
in the <a href="browser.html#variables">LSD Browser list box</a>, and choose
command <span class=Cdigo><a href="browser.html#changeelement">Model&gt;Change
Element</a></span>. Now, in the Change Element window, click on the <span
class=Cdigo>Sensitivity</span> button. Finally, in the Sensitivity Analysis
window, enter the minimum and the maximum values for the Parameter or lagged
Variable, separated by a space, select the <span class=Cdigo>Round to integer</span>
option if the element is an integer number, and click on <span class=Cdigo>OK</span>.
Repeat this procedure until all elements to be exposed to the user have their
ranges defined. To see the list of already selected elements, use the menu
command <span class=Cdigo><a href="menurun.html#showsave">Run&gt;Show Elements
to&gt;Sensitivity Analysis</a></span>.</p>

<p class=MsoNormal>When all required Parameters and Variables are set, save the
sensitivity analysis file using the command <span class=Cdigo><a
href="menufile.html">File&gt;Save Sensitivity</a></span>. The name of the saved
file must be <span class=Cdigo>lwi.sa</span>.</p>

<h2><a name="_Defining_the_Variables"></a>Defining the Variables to present as
results</h2>

<p class=MsoNormal>The <a href="LSD_faqs.html#variable">Variables</a>’ time
series which will be presented to the LWI users must be set to be saved in the <span
class=Cdigo>lwi.lsd</span> <a href="LSD_faqs.html#modelsetting">configuration
file</a>. All time series regularly marked to be saved in the <a
href="browser.html">LSD Browser</a> are made available to the users. Select the
desired Variable in the <a href="browser.html#variables">LSD Browser list box</a>
and use the menu command <span class=Cdigo><a href="browser.html#changeelement">Model&gt;Change
Element</a></span> to select the <span class=Cdigo>Save</span> checkbox in the
Change Element window.</p>

<p class=MsoNormal>After selecting all Variables to be saved and presented to
the LWI users, save the baseline configuration under the name <span
class=Cdigo>lwi.lsd</span> using the LSD Browser command <span class=Cdigo><a
href="menufile.html#save">File&gt;Save As</a></span>.</p>

<h2><a name="_Installing_the_new"></a>Installing the new LWI configuration</h2>

<p class=MsoNormal>When all the required configuration files are ready (<span
class=Cdigo>lwi.lsd</span>, <span class=Cdigo>lwi.sa</span> and <span
class=Cdigo>lsd_gnuNW[.exe]</span>) in the <a href="LSD_faqs.html#modelhome">model
home directory</a>, copy them to the base subdirectory of LWI in the server.
For Ubuntu, Windows/WSL and CentOS, use the following terminal commands (see <a
href="#_LWI_installation_and">above</a> for details on the server directory
structure):</p>

<p class=MsoNormal><a name="_Selecting_the_Parameters"></a><span class=Cdigo>cd
~/Lsd/Work/[YOUR_MODEL_PATH]<br>
sudo cp lwi.lsd /var/www/lwi<br>
sudo cp lwi.sa /var/www/lwi<br>
sudo cp lsd_gnuNW /var/www/lwi</span></p>

<p class=MsoNormal>These three files will replace the previous model and
configuration used by LWI. Finally, reload the web server so it can start using
the new files. On Ubuntu and Windows/WSL use:</p>

<p class=MsoNormal><span class=Cdigo>sudo service apache2 reload</span></p>

<p class=MsoNormal>For CentOS:</p>

<p><span class=Cdigo>sudo systemctl restart httpd.service</span></p>

<p class=MsoNormal>For macOS:</p>

<p><span class=Cdigo>sudo apachectl restart</span></p>

<p class=MsoNormal><a name="_Customizing_the_LWI"></a>Launch the browser in the
appropriate address (see <a href="#openbrowser">here</a> for details) and check
the LWI operation for your model.</p>

<h2>Customizing the LWI server</h2>

<p class=MsoNormal>Almost everything in the LWI server can be customized.
However, other than basic personalization, changing the HTML/PHP code require
reasonable web programming skills, and should be unnecessary for most
applications.</p>

<p class=MsoNormal>The main file to be customized in LWI is <span class=Cdigo>lwi/public_htnl/index.php</span>.
Basic customization can be performed by changing <i>only</i> the text marked
between the special comment marks (starting with <span class=Cdigo>&lt;!-- ###
LWI ###</span>). The pre-set change points include adding:</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Name of the model, in two versions. For large screen devices, the
name used is the one marked by:<br>
 <span class=Cdigo>&lt;!-- ### LWI ### ADD THE LONG NAME OF YOUR MODEL HERE
--&gt;</span><br>
For narrow screen devices, change the text following:<br>
<span class=Cdigo>&lt;!-- ### LWI ### ADD THE SHORT NAME OF YOUR MODEL HERE
--&gt;</span>.</p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Welcome message. Several lines of (HTML formatted) text can be
added following the mark (the existing message can be removed):<br>
<span class=Cdigo>&lt;!-- ### LWI ### ADD YOUR WELCOME MESSAGE HERE --&gt;</span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span style='font-family:
Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Copyright link. Add a website and a name for the holder of the
copyright after the mark:<br>
<span class=Cdigo>&lt;!-- ### LWI ### ADD YOUR COPYRIGHT LINK HERE --&gt;</span></p>

<p class=MsoListParagraph style='text-indent:-18.0pt'><span class=Cdigo><span
style='font-family:Symbol;color:windowtext'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span>Copyright and no-warranties messages. Define your
copyright conditions and limit responsibilities following the mark:<br>
<span class=Cdigo>&lt;!-- ### LWI ### ADD YOUR COPYRIGHT AND WARRANTY MESSAGES
HERE --&gt;</span></p>

<p class=MsoNormal>Be careful on not changing the contents outside the
comment-mark regions. Please reload the web server after any change (follow the
instructions <a href="#_Installing_the_new">above</a>).</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<h1><a name="_LSD_web_interface"></a><a name=use></a><span class=Ttulo1Char>LSD
Web Interface usage</span></h1>

<p>LSD Web Interface (LWI) requires that users are at least familiar with the
model being used. The user is supposed to have at least some basic knowledge of
the model structure and its main parameters and variables to fully profit from
LWI. All names used in LSD for the model’s parameters and variables are
preserved in LWI.</p>

<p><span lang=EN-GB>This section is organized in five subsections, mirroring
LWI software organization. Initially, we introduce LWI <a
href="#_Navigation_Panel">Navigation panel</a> and how to select the desired
operating mode (or page). The second subsection presents the <a
href="#_Configuration_page">Configuration area</a> and how to set-up the
parameter values available to the user and the management of user’s custom
configurations to/from local storage. Subsection three explains the usage of
the <a href="#_Execution_section">Execution area</a> which allows the user to
control a simulation run and provides status about the execution. The fourth
subsection covers the <a href="#_Analysis_area">Analysis area</a> which offers
options to generate data tables and graphical plots from the simulation
results. Finally, the last section presents the <a href="#_Export_page">data
export area</a> which allows the user to download the produced results time
series.</span></p>

<h2><a name="_Why_LSD?"></a><a name="_Navigation_Panel"></a>Navigation panel</h2>

<p class=MsoNormal>LWI is organized in several interaction areas or “cards”,
which can be scrolled or directly reached using the Navigation panel. When initiating
a new LWI session, the Navigation Panel is presented together with the Welcome
area. In devices with a narrow screen, like smartphones, the user has to click
in the “<span style='font-family:"MS Gothic"'>&#9776;</span>” symbol to open
the Navigation panel.</p>

<p class=MsoNormal>The options in the Navigation panel correspond to the four
main LWI areas, presented below, plus the <span class=Cdigo>Welcome</span>, <span
class=Cdigo>Reset</span>, <span class=Cdigo>Help</span> and <span class=Cdigo>Contact</span>
areas. User can switch sections by simply clicking in the name of the desired
section in the navigation panel or by scrolling the interface.</p>

<p class=MsoNormal>The <span class=Cdigo>Reset</span> page offers a command to
discard any changes made by the user, including configurations, running
simulations or results data, and initiates a new LWI session. All configuration
values previously entered by the user are lost. Any executing simulation is
aborted and the results, lost.</p>

<p class=MsoNormal>The <span class=Cdigo>Help</span> page presents a summary of
this manual.</p>

<p class=MsoNormal>The <span class=Cdigo>Contact</span> page offers a channel
between the user and the LSD web server administrator.</p>

<h2><a name="_Configuration_page"></a><a name="_Configuration_area"></a>Configuration
area</h2>

<p class=MsoNormal>The Configuration area allows the user to control many of its
parameters, initial conditions and general simulation settings. Each set of
values to all the required parameters, initial conditions and simulation
settings is defined as one <i>model configuration</i>. Every time the user
initiates a new LWI session, the default model configuration is automatically
loaded. From the Configuration page, the user can change any value, load a
saved configuration or save the current configuration to her device.</p>

<p class=MsoNormal>Configuration values can be of two types: real (floating
point) or integer numbers. All values have predefined ranges (maximum and
minimums or a set of options) and the user is not allowed to input values
outside these ranges (an error message is produced). Below you have a
description of the available configuration options. Please note that not all
combinations of configuration values may be adequate for the proper model
operation. If unexpected results are obtained after changing several values at
once, please try to restore some of them to the default configuration (by pressing
the Reset button besides any changed value) and execute the simulation again.</p>

<p class=MsoNormal>The Configuration area is divided in two areas: the
configurable item list, divided in two groups, and the command buttons. Model
parameters are predefined and fixed values that are used to compute the model
equations and define initial conditions to some variables. For instance, the
user can change parameters to modify simulated agent’s behavioral rules or the
applicable market rules. Simulation settings are values defining the execution
of the simulation model. </p>

<p class=MsoNormal>At any moment the user has the option to download the
current model configuration. The downloaded configuration is saved to the
user’s computer disk/storage as it is not possible to save it in the LWI
server. It is important to regularly save any changes made to the default
configuration, as any unsaved information is irreversibly lost whenever the
user session expires or is reset (by clicking on <span class=Cdigo>Reset
Session</span> in the Reset section or closing the user browser). To download
the current configuration, simply click on <span class=Cdigo>Download</span> in
the Configuration area. Depending on the browser used, a dialog window may
open, asking for the destination of the configuration file to be downloaded.
Configuration files have the “.csv” extension (comma-separated text file).</p>

<p class=MsoNormal>Any existing configuration file, previously saved using the <span
class=Cdigo>Download</span> option, can be loaded at any time, by clicking on <span
class=Cdigo>Upload</span>. A dialog window will ask for the file containing the
saved configuration, with the “.csv” extension.</p>

<p class=MsoNormal>Clicking on <span class=Cdigo>Reset All</span> button
replaces the current configuration values with the default ones. Be careful to
use it if you have configuration changes to be saved, as the existing values
are lost. If required, click on <span class=Cdigo>Download</span> before using
this option.</p>

<h2><a name="_Execution_section"></a><a name="_Execution_area"></a>Execution
area</h2>

<p class=MsoNormal>The Execution area controls the execution of the simulation
model in the LWI server. Model execution can take from a few seconds to several
minutes, according to the selected configuration, in particular the chosen
number of simulation time steps. The Execution area is divided in two subareas:
the Status box and the command buttons.</p>

<p class=MsoNormal>The command buttons control the simulation model execution
at the remote server. As soon as the user finishes the configuration of the
model in the <a href="#_Configuration_area">Configuration area</a>, it is
possible to start the execution by clicking on <span class=Cdigo>Start</span>.
At any time the user may interrupt the simulation by clicking on the <span
class=Cdigo>Abort</span> button. Stopping the execution before the Status box
shows <span class=Cdigo>Simulation completed</span> aborts the simulation and
no data is saved for analysis. </p>

<p class=MsoNormal>While the execution is going on, <span class=Cdigo>Simulation
running</span> is show in the Status box, together with the elapsed time. User
can execute only one simulation instance at a time. If there is any error preventing
the simulation execution to complete, the status box will show <span
class=Cdigo>Simulation error</span>, the execution will be aborted, and no data
is saved for analysis. User can click on the <span class=Cdigo>Log</span>
button to check the causes of the failure.</p>

<h2><a name="_Analysis_area"></a>Analysis area</h2>

<p class=MsoNormal>After the execution of the simulation model, the Status box
in the <a href="#_Execution_area">Execution area</a> will show <span
class=Cdigo>Simulation run complete</span>, and the produced time series will
be available for analysis in the Analysis area. The area is composed by the
time series list, the option selectors, and the command buttons. Please make
sure your browser is configured to allow the LWI website to open new browser
windows/tabs when using the commands in this area.</p>

<p class=MsoNormal>The user can select one or more items in the time series list
to be used when the command buttons are clicked. Clicking once selects the time
series and an additional click unselects it. </p>

<p class=MsoNormal>By default, the commands in the Analysis page operate over
all simulation time steps, from <span class=Cdigo>t = 1</span> to the number of
time steps defined in the <a href="#_Configuration_page">Configuration area</a>.
The user has the option to restrict the range of time steps to use in the
analysis, by changing the default values in the Selected Time Steps box.</p>

<p class=MsoNormal>The Scale box provide configuration to the scaling of the
vertical axis of time series plots. The Automatic option uses auto scaling to
plot the entire data range present in the series. The Manual option allows the
user to select the minimum and maximum values for the vertical axis plot. The
Log option uses a logarithmic scale for the vertical axis and applies the
natural logarithm to the results for the other options.</p>

<p class=MsoNormal>Clicking on <span class=Cdigo>Statistics</span> button
creates a new browser window showing some descriptive statistics for the
selected time series, including the mean, the standard deviation and minimum
and maximum values. Clicking on <span class=Cdigo>Data</span> button creates a
new browser window containing a table with the selected time series in the
columns and the time step values in the rows. At least one and up to 15 series
can be selected at a time. However, multiple data windows may be open at any
time.</p>

<p class=MsoNormal>Clicking on <span class=Cdigo>Plot</span> button creates a
new browser window with the selected time series plots. The horizontal axis
represents the simulation time steps and the vertical axis, the selected series
values. At least one and up to 15 series can be selected at a time. Multiple
plot windows may be open at a time.</p>

<h2><a name="_Export_page"></a>Export area</h2>

<p class=MsoNormal>After a LSD simulation is successfully executed, the user
can download the entire results data as a text-formatted file in
comma-separated format (.csv). This file can be directly imported in any
numerical analysis software, like spreadsheets or statistical packages. The
Export area is composed by the Information boxes and the command buttons. The
information boxes summarize the details about the available data which can be
downloaded.</p>

<p class=MsoNormal>As soon as the simulation execution is finished, the results
data file can be downloaded to the user’s computer disk/storage. It is not
possible to permanently save simulation results in the LWI server so it is
important to save relevant results before they are irreversibly lost whenever
the user session expires or is reset (by clicking on <span class=Cdigo>Reset
Session</span> in the Reset area or closing the browser). To download the
available results, simply click on <span class=Cdigo>Download</span>. A dialog
window may open, depending on the browser used, asking for the destination of
the data file. Results files have the “.csv” extension.</p>

<p class=MsoNormal>LWI results data files are comma-separated values text files
(CSV format). Columns contain single variables while lines represent variables
values at each time step. However, the first line has a special meaning, being
the first time step values located in the second line and so on. The first line
contains the columns headers with the names of the variables below.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;background:#D9D9D9;border-collapse:collapse'>
 <tr>
  <td width="100%" style='width:100.0%;padding:2.85pt 5.4pt 2.85pt 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span
  style='font-size:10.0pt'><a href="#top"><span style='color:red;text-decoration:
  none'>&#9650;Top</span></a></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

</div>

</body>

</html>
